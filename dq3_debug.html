<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>5.32. デバッグ</title>
    <link rel="stylesheet" type="text/css" href="dqbook.css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.79.1" />
    <link rel="home" href="index.html" title="ドラクエ命" />
    <link rel="up" href="dq3.html" title="第 5 章 SFC 版ドラクエ 3 (1996)" />
    <link rel="prev" href="dq3_sugoroku.html" title="5.31. すごろく" />
    <link rel="next" href="dq3_pond.html" title="5.33. オルレラの泉" />
  </head>
  <body>
    <div class="navigation"><table><tr><td class="online-navigation"><a href="dq3_sugoroku.html" title="5.31. すごろく"><img src="image/docbook/prev.png" alt="戻る" /></a></td><td class="online-navigation"><a href="dq3.html" title="第 5 章 SFC 版ドラクエ 3 (1996)"><img src="image/docbook/up.png" alt="上に戻る" /></a></td><td class="online-navigation"><a href="dq3_pond.html" title="5.33. オルレラの泉"><img src="image/docbook/next.png" alt="次へ" /></a></td><td>ドラクエ命</td><td class="online-navigation"><a href="index.html" title="ドラクエ命"><img src="image/docbook/home.png" alt="ホーム" /></a></td><td class="online-navigation"><a href="" title=""><img src="image/docbook/index.png" alt="索引" /></a></td></tr></table><b class="navlabel">Previous: </b><a accesskey="p" class="sectref" href="dq3_sugoroku.html">5.31. すごろく</a> <b class="navlabel">Up: </b><a accesskey="u" class="sectref" href="dq3.html">第 5 章 SFC 版ドラクエ 3 (1996)</a> <b class="navlabel">Next: </b><a accesskey="n" class="sectref" href="dq3_pond.html">5.33. オルレラの泉</a><hr /></div>
    <div class="section">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title" style="clear: both"><a id="dq3.debug"></a>5.32. デバッグ</h2>
          </div>
        </div>
      </div>
      <div class="toc">
        <dl class="toc">
          <dt>
            <span class="section">
              <a href="dq3_debug.html#dq3.debug.structure">5.32.1. 構造に関する構成要素</a>
            </span>
          </dt>
          <dd>
            <dl>
              <dt>
                <span class="section">
                  <a href="dq3_debug.html#dq3.debug.structure.C1FFFE">5.32.1.1. 定数 <code class="varname">$C1FFFE</code>: デバッグスイッチ</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="dq3_debug.html#dq3.debug.structure.C8D4B0">5.32.1.2. 構造体 <code class="varname">$C8D4B0</code>: デバッグコマンド</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="dq3_debug.html#dq3.debug.structure.C8A3AF">5.32.1.3. 構造体 <code class="varname">$C8A3AF</code>: いんちきルーラ</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="dq3_debug.html#dq3.debug.structure.C8F661">5.32.1.4. 構造体 <code class="varname">$C8F661</code>: フラグショップ</a>
                </span>
              </dt>
            </dl>
          </dd>
          <dt>
            <span class="section">
              <a href="dq3_debug.html#dq3.debug.behavior">5.32.2. 振る舞いに関する構成要素</a>
            </span>
          </dt>
          <dd>
            <dl>
              <dt>
                <span class="section">
                  <a href="dq3_debug.html#dq3.debug.behavior.commands">5.32.2.1. デバッグコマンド群の振る舞い</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="dq3_debug.html#dq3.debug.behavior.sugoroku">5.32.2.2. すごろく</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="dq3_debug.html#dq3.debug.behavior.preset">5.32.2.3. 「ぼうけんのしょ３」新規作成でパーティーが編成済み</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="dq3_debug.html#dq3.debug.behavior.gameshow">5.32.2.4. ゲームショーモード</a>
                </span>
              </dt>
            </dl>
          </dd>
        </dl>
      </div>
      <a id="term.dq3.debug" class="indexterm"></a>
      <p>
本節ではデバッグに関するプログラム構成要素について述べる。
読者がデバッグモードを試す場合には、次のように設定するのが良いと思われる。
</p>
      <div class="table">
        <a id="table.dq3.debug.crack"></a>
        <p class="title">
          <strong>表 5.93 デバッグモードのための PAR コード改造</strong>
        </p>
        <div class="table-contents">
          <table id="table.dq3.debug.crack" class="lighttable">
            <thead>
              <tr>
                <th>アドレス</th>
                <th>値</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>
                  <code class="varname">$C02799</code>
                </td>
                <td align="right">
                  <code class="literal">#$80</code>
                </td>
              </tr>
              <tr>
                <td>
                  <code class="varname">$C1FFFE</code>
                </td>
                <td align="right">
                  <code class="literal">#$FFFF</code>
                </td>
              </tr>
              <tr>
                <td>
                  <code class="varname">$C6FFFA</code>
                </td>
                <td align="right">
                  <code class="literal">#$80</code>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <br class="table-break" />
      <p>
ゲームの途中ならば <code class="varname">$C1FFFE</code> に対する値の上書きだけで構わない。
</p>
      <div class="section">
        <div class="titlepage">
          <div>
            <div>
              <h3 class="title"><a id="dq3.debug.structure"></a>5.32.1. 構造に関する構成要素</h3>
            </div>
          </div>
        </div>
        <p>
デバッグに関連するデータの構造について述べる。
データ自身については付録に収録したものを参照して欲しい。
</p>
        <div class="section">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title"><a id="dq3.debug.structure.C1FFFE"></a>5.32.1.1. 定数 <code class="varname">$C1FFFE</code>: デバッグスイッチ</h4>
              </div>
            </div>
          </div>
          <p>
アドレス <code class="varname">$C1FFFE</code> の値によって一部プログラムの振る舞いが変化する。
製品版ではこのアドレスの値は <code class="literal">#$0000</code> であり、これを標準モードや製品モードと呼ぶことにする。
このアドレスの値が <code class="literal">#$0001</code> であれば、ゲームショーモード、
何か負の値、例えば <code class="literal">#$FFFF</code> であれば、デバッグモードとそれぞれ呼ぶことにする。
</p>
        </div>
        <div class="section">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title"><a id="dq3.debug.structure.C8D4B0"></a>5.32.1.2. 構造体 <code class="varname">$C8D4B0</code>: デバッグコマンド</h4>
              </div>
            </div>
          </div>
          <p>
デバッグコマンドとは、デバッグモードにおいて移動モードでコントローラーの L ボタンと押すと
表示されるメニューウィンドウにリストされているコマンド群のことを指すものとする。
</p>
          <div class="figure">
            <a id="fig.dq3.debug.menu"></a>
            <p class="title">
              <strong>図 5.4 デバッグメニュー</strong>
            </p>
            <div class="figure-contents">
              <div>
                <table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="240">
                  <tr>
                    <td>
                      <img src="./image/dq3.debug.menu.png" width="240" alt="デバッグメニュー" />
                    </td>
                  </tr>
                </table>
              </div>
            </div>
          </div>
          <br class="figure-break" />
          <p>
アドレス <code class="varname">$C8D4B0</code> に配列されているオブジェクトそれぞれがコマンドを表現する。
オブジェクトの型の詳細を次の表に示す。
</p>
          <div class="table">
            <a id="table.dq3.C8D4B0"></a>
            <p class="title">
              <strong>表 5.94 構造体 $C8D4B0</strong>
            </p>
            <div class="table-contents">
              <table id="table.dq3.C8D4B0" class="lighttable">
                <thead>
                  <tr>
                    <th>オフセット</th>
                    <th>桁</th>
                    <th>属性</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>
                      <code class="literal">#$00</code>
                    </td>
                    <td>
                      <code class="literal">#$00FFFF</code>
                    </td>
                    <td>名前</td>
                  </tr>
                  <tr>
                    <td>
                      <code class="literal">#$02</code>
                    </td>
                    <td>
                      <code class="literal">#$FFFFFF</code>
                    </td>
                    <td>コマンドハンドラー</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          <br class="table-break" />
          <p>
各属性の詳細は次のとおり。
</p>
          <div class="variablelist">
            <dl class="variablelist">
              <dt>
                <span class="term">名前</span>
              </dt>
              <dd>
                <p>
        文字列の ID を値とする属性であり、コマンドの名前を表現する。
        文字列については <a class="xref" href="dq3_string.html" title="5.2. 文字列">5.2 文字列</a> で述べる。
      </p>
              </dd>
              <dt>
                <span class="term">コマンドハンドラー</span>
              </dt>
              <dd>
                <p>
        サブルーチンの完全アドレスを値とする属性であり、メニュー項目選択時の処理を実行する。
        各処理については <a class="xref" href="dq3_debug.html#dq3.debug.behavior" title="5.32.2. 振る舞いに関する構成要素">5.32.2</a> 以降で述べる。
      </p>
              </dd>
            </dl>
          </div>
        </div>
        <div class="section">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title"><a id="dq3.debug.structure.C8A3AF"></a>5.32.1.3. 構造体 <code class="varname">$C8A3AF</code>: いんちきルーラ</h4>
              </div>
            </div>
          </div>
          <p>
いんちきルーラとは、デバッグコマンドの一つであり、
現在地やキャラクターの MP に由来する制約を無視して指定の地点へ移動することを目的とするものだ。
</p>
          <div class="figure">
            <a id="fig.dq3.debug.fake.rura"></a>
            <p class="title">
              <strong>図 5.5 いんちきルーラ</strong>
            </p>
            <div class="figure-contents">
              <div>
                <table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="240">
                  <tr>
                    <td>
                      <img src="./image/dq3.debug.zoom.png" width="240" alt="いんちきルーラ" />
                    </td>
                  </tr>
                </table>
              </div>
            </div>
          </div>
          <br class="figure-break" />
          <p>
詳細は <a class="xref" href="dq3_locations.html#dq3.locations.structure.C8A3AF" title="5.28.1.2. 構造体 $C8A3AF: ルーラ">5.28.1.2 構造体 <code class="varname">$C8A3AF</code>: ルーラ</a> で述べる。
</p>
        </div>
        <div class="section">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title"><a id="dq3.debug.structure.C8F661"></a>5.32.1.4. 構造体 <code class="varname">$C8F661</code>: フラグショップ</h4>
              </div>
            </div>
          </div>
          <p>
フラグショップとは、デバッグコマンドの一つであり、物語の進行状況を制御することを目的とするものだ。
</p>
          <div class="figure">
            <a id="fig.dq3.debug.flag"></a>
            <p class="title">
              <strong>図 5.6 フラグショップ</strong>
            </p>
            <div class="figure-contents">
              <div>
                <table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="240">
                  <tr>
                    <td>
                      <img src="./image/dq3.debug.flagshop.png" width="240" alt="フラグショップ" />
                    </td>
                  </tr>
                </table>
              </div>
            </div>
          </div>
          <br class="figure-break" />
          <p>
アドレス <code class="varname">$C8F661</code> に配列されているオブジェクトそれぞれがフラグを操作する処理コードのアドレスを保持している。
オブジェクトの型の詳細を次の表に示す。
</p>
          <div class="table">
            <a id="table.dq3.C8F661"></a>
            <p class="title">
              <strong>表 5.95 構造体 $C8F661</strong>
            </p>
            <div class="table-contents">
              <table id="table.dq3.C8F661" class="lighttable">
                <thead>
                  <tr>
                    <th>オフセット</th>
                    <th>桁</th>
                    <th>属性</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>
                      <code class="literal">#$00</code>
                    </td>
                    <td>
                      <code class="literal">#$00FFFF</code>
                    </td>
                    <td>名前</td>
                  </tr>
                  <tr>
                    <td>
                      <code class="literal">#$02</code>
                    </td>
                    <td>
                      <code class="literal">#$FFFFFF</code>
                    </td>
                    <td>コマンドハンドラー</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          <br class="table-break" />
          <p>
各属性の詳細は <a class="xref" href="dq3_debug.html#dq3.debug.structure.C8D4B0" title="5.32.1.2. 構造体 $C8D4B0: デバッグコマンド">5.32.1.2</a> と同様だ。
</p>
        </div>
      </div>
      <div class="section">
        <div class="titlepage">
          <div>
            <div>
              <h3 class="title"><a id="dq3.debug.behavior"></a>5.32.2. 振る舞いに関する構成要素</h3>
            </div>
          </div>
        </div>
        <p>
デバッグモードでのさまざまな振る舞いについて述べる。
</p>
        <div class="section">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title"><a id="dq3.debug.behavior.commands"></a>5.32.2.1. デバッグコマンド群の振る舞い</h4>
              </div>
            </div>
          </div>
          <p>
デバッグメニュー各コマンドの振る舞いについて簡単に述べる。
</p>
          <div class="variablelist">
            <dl class="variablelist">
              <dt>
                <span class="term">いんちきルーラ</span>
              </dt>
              <dd>
                <p>
        <a class="xref" href="dq3_debug.html#dq3.debug.structure.C8A3AF" title="5.32.1.3. 構造体 $C8A3AF: いんちきルーラ">5.32.1.3</a> の冒頭の説明を参照。
      </p>
              </dd>
              <dt>
                <span class="term">いんちきリレミト</span>
              </dt>
              <dd>
                <p>
        だれの MP を消費することもなしにリレミト処理を行う。
        リレミトが意味のあるところにいる限り、リレミト相当の処理を実行する。
        ピラミッドの地下などでも機能する。
        コマンドが成功しないときにはメッセージが表示される。
      </p>
              </dd>
              <dt>
                <span class="term">いんちきラナルータ</span>
              </dt>
              <dd>
                <p>
        だれの MP を消費することもなしにラナルータ処理を行う。
      </p>
                <p>
        ラナルータが禁止されていない限り、ラナルータ相当の処理を実行する。
        ラナルータを成功させる要素が 4 つあるようだが、現在地にちなむもの以外は不明だ。
      </p>
              </dd>
              <dt>
                <span class="term">おみせ</span>
              </dt>
              <dd>
                <div class="figure">
                  <a id="fig.dq3.debug.shop"></a>
                  <p class="title">
                    <strong>図 5.7 おみせ</strong>
                  </p>
                  <div class="figure-contents">
                    <div>
                      <table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="240">
                        <tr>
                          <td>
                            <img src="./image/dq3.debug.shops.png" width="240" alt="おみせ" />
                          </td>
                        </tr>
                      </table>
                    </div>
                  </div>
                </div>
                <br class="figure-break" />
                <p>
        図のようなサブメニューを表示する。
        選択する項目により、店屋の共通処理が始まる。
      </p>
                <p>
        「ぶきや」「ぼうぐや」「どうぐや」「よろずや」の処理については <a class="xref" href="dq3_shops.html" title="5.11. 店屋">5.11 店屋</a> を、
        「しんぷ」「シスター」は <a class="xref" href="dq3_chapels.html" title="5.14. 教会">5.14 教会</a>、
        「やどや」は <a class="xref" href="dq3_inns.html" title="5.13. 宿屋">5.13 宿屋</a>、
        「ぎんこう」は <a class="xref" href="dq3_bank.html" title="5.17. ゴールド銀行">5.17 ゴールド銀行</a>、
        「なかまとうろくじょ」は <a class="xref" href="dq3_registration.html" title="5.16. 冒険者たちの登録所">5.16 冒険者たちの登録所</a>、
        「ルイーダのさかば」は <a class="xref" href="dq3_luida.html" title="5.15. ルイーダの酒場">5.15 ルイーダの酒場</a>、
        「ダーマのしんでん」は <a class="xref" href="dq3_dharma.html" title="5.18. 転職">5.18 転職</a>、
        「なまえかえや」は <a class="xref" href="dq3_rename.html" title="5.19. 命名神">5.19 命名神</a>、
        「かくとうじょう」「よそうや」「マッチメイク」は <a class="xref" href="dq3_matchmake.html" title="5.20. 格闘場">5.20 格闘場</a>、
        「ふっかけみせや」は <a class="xref" href="dq3_overcharge.html" title="5.12. ふっかけ店屋">5.12 ふっかけ店屋</a>、
        「メダルおじさん」は <a class="xref" href="dq3_medals.html" title="5.22. メダルおじさん">5.22 メダルおじさん</a>、
        「シスターセーブ」「おうさま」は <a class="xref" href="dq3_kings.html" title="5.10. 王様">5.10 王様</a> をそれぞれ参照。
      </p>
              </dd>
              <dt>
                <span class="term">レベルアップ</span>
              </dt>
              <dd>
                <div class="figure">
                  <a id="fig.dq3.debug.level"></a>
                  <p class="title">
                    <strong>図 5.8 レベルアップ</strong>
                  </p>
                  <div class="figure-contents">
                    <div>
                      <table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="240">
                        <tr>
                          <td>
                            <img src="./image/dq3.debug.level.png" width="240" alt="レベルアップ" />
                          </td>
                        </tr>
                      </table>
                    </div>
                  </div>
                </div>
                <br class="figure-break" />
                <p>
        レベルアップコマンドは、仲間キャラクター一人のレベルを変更する機能だ。
      </p>
                <p>
        この項目を選択すると、コマンドウィンドウで「つよさ」を選択したときと同じサブウィンドウ群が出る。
        さらにこの状態でキャラクターを選択すると、「つよさ」ウィンドウが出る代わりに、
        数値入力ウィンドウが出現する（上記画像）。
        ここで 1 から 99 までの値を入力すると、選択したキャラクターのレベルがその値となる。
        キャラクターのパラメータや、習得呪文もそれらしいものになる。
        従ってレベルダウンも可能である。
        0 の入力はキャンセル扱いになり、100 以上の値の入力は 99 が入力されたものとみなされる。
      </p>
              </dd>
              <dt>
                <span class="term">てんしょく</span>
              </dt>
              <dd>
                <p>
        コードとしてはキャリーフラグをリセットするだけで、処理は本当に何もない。
        デバッグコマンド「おみせ」から「ダーマ」を選択すればよいだろう。
      </p>
              </dd>
              <dt>
                <span class="term">せいかく</span>
              </dt>
              <dd>
                <div class="figure">
                  <a id="fig.dq3.debug.character"></a>
                  <p class="title">
                    <strong>図 5.9 せいかく</strong>
                  </p>
                  <div class="figure-contents">
                    <div>
                      <table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="240">
                        <tr>
                          <td>
                            <img src="./image/dq3.debug.personalities.png" width="240" alt="せいかく" />
                          </td>
                        </tr>
                      </table>
                    </div>
                  </div>
                </div>
                <br class="figure-break" />
                <p>
        せいかくコマンドは、仲間キャラクター一人の素の性格を変更する機能だ。
      </p>
                <p>
        この項目を選択すると、コマンドウィンドウで「つよさ」を選択したときと同じサブウィンドウ群が出る。
        さらにこの状態でキャラクターを選択すると、「つよさ」ウィンドウが出る代わりに、
        性格リストウィンドウ (ID: <code class="literal">#$A7</code>) が出現する（上記画像）。
        どれか性格を選択すると、選択キャラクターの素の性格がそれに設定される。
      </p>
              </dd>
              <dt>
                <span class="term">おかね</span>
              </dt>
              <dd>
                <p>
        おかねコマンドは、パーティーの所持金を変更する機能だ。
      </p>
                <p>
        金額入力ウィンドウが出現する。
        ここ値を入力すると、そのまま現在のパーティの所持金として設定される。
      </p>
              </dd>
              <dt>
                <span class="term">フラグショップ</span>
              </dt>
              <dd>
                <p>
        <a class="xref" href="dq3_debug.html#dq3.debug.structure.C8F661" title="5.32.1.4. 構造体 $C8F661: フラグショップ">5.32.1.4</a> の冒頭の説明を参照。
      </p>
                <p>
        各項目の詳細は後述する。
      </p>
              </dd>
              <dt>
                <span class="term">ひとじょうたい</span>
              </dt>
              <dd>
                <div class="figure">
                  <a id="fig.dq3.debug.status.party"></a>
                  <p class="title">
                    <strong>図 5.10 ひとじょうたい</strong>
                  </p>
                  <div class="figure-contents">
                    <div>
                      <table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="240">
                        <tr>
                          <td>
                            <img src="./image/dq3.debug.status.ailments.png" width="240" alt="ひとじょうたい" />
                          </td>
                        </tr>
                      </table>
                    </div>
                  </div>
                </div>
                <br class="figure-break" />
                <p>
        ひとじょうたいコマンドは、仲間キャラクター一人の「しに・まひ・どく」状態を 1 にする機能だ。
        仲間キャラクターオブジェクトの属性については <a class="xref" href="dq3_characters.html" title="5.4. 仲間キャラクターオブジェクト">5.4 仲間キャラクターオブジェクト</a> で述べる。
      </p>
                <p>
        「だれを」ウィンドウが出現して、パーティー内キャラクターのだれか一人を選択する。
        キャラクターを選択すると、ステータスを「しに・まひ・どく」の中から設定することができる。
      </p>
                <p>
        「しに」を選択すると、キャラクターの HP がゼロにすることで死なせる。
        「まひ」「どく」はキャラクター状態ビットを ON にする処理である。
      </p>
              </dd>
              <dt>
                <span class="term">ゲームじょうたい</span>
              </dt>
              <dd>
                <div class="figure">
                  <a id="fig.dq3.debug.status.game"></a>
                  <p class="title">
                    <strong>図 5.11 ゲームじょうたい</strong>
                  </p>
                  <div class="figure-contents">
                    <div>
                      <table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="240">
                        <tr>
                          <td>
                            <img src="./image/dq3.debug.status.travel.png" width="240" alt="ゲームじょうたい" />
                          </td>
                        </tr>
                      </table>
                    </div>
                  </div>
                </div>
                <br class="figure-break" />
                <p>
        ゲームじょうたいコマンドは、現在地のある種の属性を表示する機能だ。
      </p>
                <p>
        ウィンドウ (ID: <code class="literal">#$7D</code>) が出現する。
        例えば「ルーラ」では「できる」「できない」「あたまをぶつける」のどれかが表示される。
      </p>
              </dd>
              <dt>
                <span class="term">どうぐふくろ</span>
              </dt>
              <dd>
                <p>
        どうぐふくろコマンドは、ID が <code class="literal">#$0000</code> から <code class="literal">#$00E4</code> までのアイテムを一個ずつふくろに追加する機能だ。
      </p>
                <p>
        実際には ID がゼロのアイテムはヌルアイテムなので、これは袋サブルーチンで除外される。
      </p>
              </dd>
              <dt>
                <span class="term">せんたくせんとう</span>
              </dt>
              <dd>
                <div class="figure">
                  <a id="fig.dq3.debug.enc.monster"></a>
                  <p class="title">
                    <strong>図 5.12 せんたくせんとう</strong>
                  </p>
                  <div class="figure-contents">
                    <div>
                      <table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="240">
                        <tr>
                          <td>
                            <img src="./image/dq3.debug.encounter.monsters.png" width="240" alt="せんたくせんとう" />
                          </td>
                        </tr>
                      </table>
                    </div>
                  </div>
                </div>
                <br class="figure-break" />
                <p>
        せんたくせんとうコマンドは、敵陣構成を指定して戦闘を開始する機能だ。
        モンスターについては <a class="xref" href="dq3_monsters.html" title="5.5. モンスター">5.5 モンスター</a> で述べる。
      </p>
                <p>
        まず、モンスターせんたくウィンドウ (ID: <code class="literal">#$D1</code>) が出現する。
        ここでモンスターを示す項目を選択すると、さらに数値入力ウィンドウが出現する。
        数値を入力すると、再びモンスターせんたくウィンドウがアクティブになる。
      </p>
                <p>
        モンスターと数値のペアを 4 回入力すると、さらに数値入力ウィンドウが出現する
        （同じ場所に出てくるため、わかりにくい）。
        ここで入力するのは戦闘背景 ID である。
        ゼロを入力するとランダムに背景が決まり、
        <code class="literal">#$004A</code> 以上の値を入力すると <code class="literal">#$0049</code> を入力した扱いになる。
      </p>
                <p>
        戦闘背景 ID を入力すると、戦闘モードに切り替わる。
        登場するモンスターの群れは、先程指示したモンスターグループとなる。
        各グループのモンスター頭数が、指定数値を考慮したものになっている。
        画面背景も指定のものになっている。
      </p>
              </dd>
              <dt>
                <span class="term">タイルせんとう</span>
              </dt>
              <dd>
                <div class="figure">
                  <a id="fig.dq3.debug.enc.tile"></a>
                  <p class="title">
                    <strong>図 5.13 タイルせんとう</strong>
                  </p>
                  <div class="figure-contents">
                    <div>
                      <table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="240">
                        <tr>
                          <td>
                            <img src="./image/dq3.debug.encounter.zones.png" width="240" alt="タイルせんとう" />
                          </td>
                        </tr>
                      </table>
                    </div>
                  </div>
                </div>
                <br class="figure-break" />
                <p>
        タイルせんとうコマンドは、戦闘地域 ID を指定して戦闘を開始する機能だ。
        戦闘地域オブジェクトについては <a class="xref" href="dq3_encounter.html#dq3.encounter.structure.C8ADD1" title="5.30.1.2. 構造体 $C8ADD1: 通常戦">5.30.1.2 構造体 <code class="varname">$C8ADD1</code>: 通常戦</a> で述べる。
      </p>
                <p>
        数値入力ウィンドウが出現する。初期値は現在値が戦闘地域ならばその ID の値が既定値として表示されている。
        ここで <code class="literal">#$0069</code> 未満の数値を入力すると、いきなり戦闘モードに切り替わり、
        その敵陣構成は指定した ID に基づくものになっている。
      </p>
              </dd>
              <dt>
                <span class="term">モンスターをみる</span>
              </dt>
              <dd>
                <div class="figure">
                  <a id="fig.dq3.debug.monster.ani"></a>
                  <p class="title">
                    <strong>図 5.14 モンスターをみる</strong>
                  </p>
                  <div class="figure-contents">
                    <div>
                      <table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="248">
                        <tr>
                          <td>
                            <img src="./image/dq3.debug.monster.sprites.png" width="248" alt="モンスターをみる" />
                          </td>
                        </tr>
                      </table>
                    </div>
                  </div>
                </div>
                <br class="figure-break" />
                <p>
        モンスターをみるコマンドは、モンスターのアニメーションを確認する機能だ。
        モンスターについては <a class="xref" href="dq3_monsters.html" title="5.5. モンスター">5.5 モンスター</a> で述べる。
      </p>
                <p>
        画面が切り替わり、背景が戦闘背景 <code class="literal">#$0001</code> になる。
        ウィンドウにリストされているモンスターを選択すると、
        そのモンスターのスプライトに関連するアニメーションの個数だけ数字がリストされたミニウィンドウが出現する。
        ここで番号を選択すると、対応するアニメーションが再現される。
      </p>
              </dd>
              <dt>
                <span class="term">ぜんかいふく</span>
              </dt>
              <dd>
                <p>
        ぜんかいふくコマンドは、パーティー全員の毒・マヒ状態を回復してから HP と MP を完全に回復する。
      </p>
                <p>
        死んでいるキャラクターにもこの回復を適用するが、
        カンオケスプライトの更新は次のキャラクター再描画の機会まで発生しない。
      </p>
              </dd>
              <dt>
                <span class="term">プログラムスタート</span>
              </dt>
              <dd>
                <p>
        名前とは裏腹に、このデバッグメニューウィンドウを消去して、
        再びデバッグメニューウィンドウを表示するという処理になっている。
      </p>
              </dd>
              <dt>
                <span class="term">サウンド</span>
              </dt>
              <dd>
                <p>
        サウンドコマンドは、BGM と効果音を再生する機能だ。
      </p>
                <p>
        まず数値入力ウィンドウが出現する。
        ここで数値を入力すると、この値を ID とする BGM なり効果音なりが演奏される。
        ゼロの入力は単に無視される。
        入力値が <code class="literal">#$017E</code> 以上のときは、<code class="literal">#$017E</code> が入力されたとして扱われる。
        演奏ストップ機能はないらしい。
      </p>
              </dd>
              <dt>
                <span class="term">ほこうせってい</span>
              </dt>
              <dd>
                <div class="figure">
                  <a id="fig.dq3.debug.enable.cancel"></a>
                  <p class="title">
                    <strong>図 5.15 ほこうせってい</strong>
                  </p>
                  <div class="figure-contents">
                    <div>
                      <table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="240">
                        <tr>
                          <td>
                            <img src="./image/dq3.debug.toggle.walk.png" width="240" alt="ほこうせってい" />
                          </td>
                        </tr>
                      </table>
                    </div>
                  </div>
                </div>
                <br class="figure-break" />
                <p>
        ほこうせっていコマンドは、キャンセル歩行モードを切り替える機能だ。
      </p>
                <p>
        図のようなメッセージが出現する。
        「はい」と答えると、キャンセル歩行ができる (<code class="code">$7E3500 |= #$0002</code>) ようになり、
        「いいえ」はその逆 (<code class="code">$7E3500 &amp;= ~#$0002</code>) となる。
      </p>
                <p>
        キャンセル歩行が有効であるとは、SELECT ボタンを押しながら十字キーを押すことで、
        壁や水場等の通過できない地形を通過することができる状態を指すようだ。
        船で移動中の場合は、上陸しないでそのまま移動し続けることになる。
      </p>
              </dd>
              <dt>
                <span class="term">エンカウントせってい</span>
              </dt>
              <dd>
                <div class="figure">
                  <a id="fig.dq3.debug.enable.enc"></a>
                  <p class="title">
                    <strong>図 5.16 エンカウントせってい</strong>
                  </p>
                  <div class="figure-contents">
                    <div>
                      <table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="240">
                        <tr>
                          <td>
                            <img src="./image/dq3.debug.toggle.encounter.png" width="240" alt="エンカウントせってい" />
                          </td>
                        </tr>
                      </table>
                    </div>
                  </div>
                </div>
                <br class="figure-break" />
                <p>
        エンカウントせっていコマンドは、戦闘地域の移動中にランダムに戦闘が発生するかどうかを指定する機能だ。
      </p>
                <p>
        図のようなメッセージが出現する。
        「いいえ」と答えると、フィールドやダンジョンを歩いていても敵が一切出現しなく (<code class="code">$7E3500 &amp;= ~#$0001</code>) なる。
        「はい」はその逆 (<code class="code">$7E3500 |= #$0001</code>) である。
        通常のゲームモードでは「はい」の状態である。
      </p>
              </dd>
              <dt>
                <span class="term">スタートフロアせってい</span>
              </dt>
              <dd>
                <div class="figure">
                  <a id="fig.dq3.debug.enable.startfloor"></a>
                  <p class="title">
                    <strong>図 5.17 スタートフロアせってい</strong>
                  </p>
                  <div class="figure-contents">
                    <div>
                      <table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="240">
                        <tr>
                          <td>
                            <img src="./image/dq3.debug.toggle.initial.png" width="240" alt="スタートフロアせってい" />
                          </td>
                        </tr>
                      </table>
                    </div>
                  </div>
                </div>
                <br class="figure-break" />
                <p>
        スタートフロアせっていコマンドは、冒険の書を選択してゲームを開始する地点をインチキフロアとするかどうかを指定する機能だ。
        インチキフロアとは、勇者の家そっくりの謎の空間のことだ。
      </p>
                <p>
        図のようなメッセージが出現する。
        「はい」と答えると、
        冒険の書を選択してゲームを開始する時点でのフロアが、
        上述の謎空間 (ID: <code class="literal">#$0001</code>) となるフラグ (<code class="code">$7E3500 |= #$0004</code>) が立つ。
        「いいえ」はその逆となる。
      </p>
              </dd>
              <dt>
                <span class="term">ざひょうウィンドウ</span>
              </dt>
              <dd>
                <div class="figure">
                  <a id="fig.dq3.debug.enable.coord"></a>
                  <p class="title">
                    <strong>図 5.18 ざひょうウィンドウ</strong>
                  </p>
                  <div class="figure-contents">
                    <div>
                      <table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="240">
                        <tr>
                          <td>
                            <img src="./image/dq3.debug.toggle.coords.png" width="240" alt="ざひょうウィンドウ" />
                          </td>
                        </tr>
                      </table>
                    </div>
                  </div>
                </div>
                <br class="figure-break" />
                <p>
        ざひょうウィンドウコマンドは、座標ウィンドウ表示機能の有効性を切り替える機能だ。
      </p>
                <p>
        図のようなメッセージが出現する。
        「はい」と答えると、移動モードにおいて R ボタンを押したときに、
        画面右下に現在の座標を表示するウィンドウ (ID: <code class="literal">#$7C</code>) が出現するようになる。
      </p>
                <div class="figure">
                  <a id="fig.dq3.debug.coord"></a>
                  <p class="title">
                    <strong>図 5.19 ざひょうウィンドウ</strong>
                  </p>
                  <div class="figure-contents">
                    <div>
                      <table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="240">
                        <tr>
                          <td>
                            <img src="./image/dq3.debug.window.coords.png" width="240" alt="ざひょうウィンドウ" />
                          </td>
                        </tr>
                      </table>
                    </div>
                  </div>
                </div>
                <br class="figure-break" />
              </dd>
              <dt>
                <span class="term">ひとひょうじ</span>
              </dt>
              <dd>
                <div class="figure">
                  <a id="fig.dq3.debug.enable.people"></a>
                  <p class="title">
                    <strong>図 5.20 ひとひょうじ</strong>
                  </p>
                  <div class="figure-contents">
                    <div>
                      <table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="240">
                        <tr>
                          <td>
                            <img src="./image/dq3.debug.toggle.sprites.png" width="240" alt="ひとひょうじ" />
                          </td>
                        </tr>
                      </table>
                    </div>
                  </div>
                </div>
                <br class="figure-break" />
                <p>
        ひとひょうじコマンドは、移動モードでパーティーキャラクターおよび「はなす」対象キャラクターのスプライト描画の有効性を切り替える機能だ。
      </p>
                <p>
        図のようなメッセージが出現する。
        「いいえ」と答えると、移動モードでパーティーキャラクターおよび「はなす」対象キャラクターのスプライトが描画されなくなる。
        通常は「はい」の状態である。
      </p>
              </dd>
              <dt>
                <span class="term">ＲＯＭバージョン</span>
              </dt>
              <dd>
                <div class="figure">
                  <a id="fig.dq3.debug.romver"></a>
                  <p class="title">
                    <strong>図 5.21 ＲＯＭバージョン</strong>
                  </p>
                  <div class="figure-contents">
                    <div>
                      <table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="240">
                        <tr>
                          <td>
                            <img src="./image/dq3.debug.romver.png" width="240" alt="ＲＯＭバージョン" />
                          </td>
                        </tr>
                      </table>
                    </div>
                  </div>
                </div>
                <br class="figure-break" />
                <p>
        ＲＯＭバージョンコマンドは、ウィンドウ <code class="literal">#$B0</code> を表示する機能だ。
      </p>
                <p>
        ＲＯＭバージョンの情報を示すウィンドウが画面右上に出現する。
        デバッグモードでは、このデバッグメニューから表示しなくても、
        冒険の書メニュー画面や、王様に冒険の書を記録させるときにもこの
        ＲＯＭバージョンウィンドウが出現する。
      </p>
              </dd>
              <dt>
                <span class="term">プレゼンよう</span>
              </dt>
              <dd>
                <p>
        プレゼンようコマンドは、画面をエンディングの終盤付近（スタッフロール終了後くらい）に切り替える機能だ。
      </p>
              </dd>
              <dt>
                <span class="term">へんげのつえ</span>
              </dt>
              <dd>
                <p>
        へんげのつえコマンドは、アイテムのへんげのつえを次に使うときに化けるスプライトを設定する機能だ。
      </p>
                <p>
        数値入力ウィンドウが出現する。ここで 9 未満の数値を入力すればよい。
        0 を入力することはデバッグ機能を使わないことを意味する。
        1 から 8 までの入力は、ここから 1 を引いて配列 <code class="varname">$C89839</code> の要素の位置を指定する。
        この配列要素の値は <a class="xref" href="dq3_talk.html#dq3.talk.model.C893D4" title="5.26.1.2. 構造体 $C893D4: 「はなす」対象分類">5.26.1.2 構造体 <code class="varname">$C893D4</code>: 「はなす」対象分類</a> で述べるオブジェクトの ID だ。
      </p>
              </dd>
            </dl>
          </div>
        </div>
        <div class="section">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title"><a id="dq3.debug.behavior.sugoroku"></a>5.32.2.2. すごろく</h4>
              </div>
            </div>
          </div>
          <p>
デバッグモードが有効であると、通常のすごろくの振る舞いに加えて、次の操作を実現することができる。
</p>
          <div class="variablelist">
            <dl class="variablelist">
              <dt>
                <span class="term">出目操作</span>
              </dt>
              <dd>
                <div class="figure">
                  <a id="fig.dq3.debug.sugoroku.dice"></a>
                  <p class="title">
                    <strong>図 5.22 出目操作</strong>
                  </p>
                  <div class="figure-contents">
                    <div>
                      <table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="240">
                        <tr>
                          <td>
                            <img src="./image/dq3.debug.sugoroku.dice.png" width="240" alt="出目操作" />
                          </td>
                        </tr>
                      </table>
                    </div>
                  </div>
                </div>
                <br class="figure-break" />
                <p>
        すごろくコマンドウィンドウを出す前に L ボタンを押すと、図のように数値入力ウィンドウが出現する。
        ここに 1 以上 6 以下の値を入力すると、次回以降、マス移動のためのサイコロの出目が入力値と同じになる。
        0 を入力するか、入力をキャンセルすると、サイコロの出目は通常の振る舞い（ランダム）に戻る。
      </p>
              </dd>
              <dt>
                <span class="term">ランダムイベント指定</span>
              </dt>
              <dd>
                <div class="figure">
                  <a id="fig.dq3.debug.sugoroku.question"></a>
                  <p class="title">
                    <strong>図 5.23 サイコロ操作の画像と似てしまった</strong>
                  </p>
                  <div class="figure-contents">
                    <div>
                      <table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="240">
                        <tr>
                          <td>
                            <img src="./image/dq3.debug.sugoroku.events.png" width="240" alt="サイコロ操作の画像と似てしまった" />
                          </td>
                        </tr>
                      </table>
                    </div>
                  </div>
                </div>
                <br class="figure-break" />
                <p>
        「？」マスに止まった直後、図のように数値入力ウィンドウが出現する。
        ここで 49 未満の数値を入力すればよい。
        0 を入力することはデバッグ機能を使わないことを意味する。
        1 から 48 までの入力は、ここから 1 を引いて <a class="xref" href="dq3_sugoroku.html#dq3.sugoroku.structure.C8F1F4" title="5.31.1.4. 構造体 $C8F1F4: すごろくランダムイベント列">5.31.1.4 構造体 <code class="varname">$C8F1F4</code>: すごろくランダムイベント列</a> で述べる配列 ID とする。
        この配列要素の値が <a class="xref" href="dq3_sugoroku.html#dq3.sugoroku.structure.C8F188" title="5.31.1.3. 配列 $C8F188: すごろくランダムイベントハンドラー">5.31.1.3 配列 <code class="varname">$C8F188</code>: すごろくランダムイベントハンドラー</a> で述べるハンドラーの ID となる。
      </p>
              </dd>
            </dl>
          </div>
        </div>
        <div class="section">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title"><a id="dq3.debug.behavior.preset"></a>5.32.2.3. 「ぼうけんのしょ３」新規作成でパーティーが編成済み</h4>
              </div>
            </div>
          </div>
          <p>
「ぼうけんのしょ３」を新規作成すると、最後のステレオ・モノラル選択直後、
性格診断から始まらずに、図のフロア（テスト）からゲームが始まる。
勇者の性格は「まけずぎらい」であり、レベルがすでに 99 になっている。
そして、3 人の仲間「モツオ」「はげまる」「いんちき」とパーティーを組んでいる。
それぞれレベル 99 の戦士、魔法使い、遊び人だ。
いずれも呪文はすべて習得済みであり、性格が空白になっている。
</p>
          <div class="figure">
            <a id="fig.dq3.debug.motsuo"></a>
            <p class="title">
              <strong>図 5.24 謎のパーティー</strong>
            </p>
            <div class="figure-contents">
              <div>
                <table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="240">
                  <tr>
                    <td>
                      <img src="./image/dq3.debug.motsuo.png" width="240" alt="謎のパーティー" />
                    </td>
                  </tr>
                </table>
              </div>
            </div>
          </div>
          <br class="figure-break" />
        </div>
        <div class="section">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title"><a id="dq3.debug.behavior.gameshow"></a>5.32.2.4. ゲームショーモード</h4>
              </div>
            </div>
          </div>
          <p>
おそらく <code class="varname">$C1FFFE</code> の値が <code class="literal">#$0001</code> であるビルドは、
SFC 版ドラクエ 3 の発売以前にゲームショー等でプログラムを動作させるためのものだと思われる。
製品ビルドとの振る舞いの違いには次のようなものがある。
</p>
          <div class="itemizedlist">
            <ul class="itemizedlist" style="list-style-type: disc; ">
              <li class="listitem">
                <p>
      王様等の記録処理において、冒険の書を実は記録しなくなる。
    </p>
              </li>
              <li class="listitem">
                <p>
      仲間キャラクターのレベルが 5 を上限に上がらなくなる。
      ただし経験値は普通に上がっていく。
    </p>
              </li>
              <li class="listitem">
                <p>
      いざないの洞くつで「まほうのたま」を設置すると、
      なぜか「すべてをつかさどる者」の台詞 (ID: <code class="literal">#$0FAC</code>-<code class="literal">#$0FB1</code>) が出現して、ゲームが終了する
      （画面暗転後、ENIX のロゴマーク表示）。
      そして、冒険の書選択画面になる。
    </p>
                <div class="figure">
                  <a id="fig.dq3.debug.bomb"></a>
                  <p class="title">
                    <strong>図 5.25 まほうのたま使用直後</strong>
                  </p>
                  <div class="figure-contents">
                    <div>
                      <table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="240">
                        <tr>
                          <td>
                            <img src="./image/dq3.debug.bomb.png" width="240" alt="まほうのたま使用直後" />
                          </td>
                        </tr>
                      </table>
                    </div>
                  </div>
                </div>
                <br class="figure-break" />
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    <div class="navigation"><hr /><table><tr><td class="online-navigation"><a href="dq3_sugoroku.html" title="5.31. すごろく"><img src="image/docbook/prev.png" alt="戻る" /></a></td><td class="online-navigation"><a href="dq3.html" title="第 5 章 SFC 版ドラクエ 3 (1996)"><img src="image/docbook/up.png" alt="上に戻る" /></a></td><td class="online-navigation"><a href="dq3_pond.html" title="5.33. オルレラの泉"><img src="image/docbook/next.png" alt="次へ" /></a></td><td>ドラクエ命</td><td class="online-navigation"><a href="index.html" title="ドラクエ命"><img src="image/docbook/home.png" alt="ホーム" /></a></td><td class="online-navigation"><a href="" title=""><img src="image/docbook/index.png" alt="索引" /></a></td></tr></table><b class="navlabel">Previous: </b><a accesskey="p" class="sectref" href="dq3_sugoroku.html">5.31. すごろく</a> <b class="navlabel">Up: </b><a accesskey="u" class="sectref" href="dq3.html">第 5 章 SFC 版ドラクエ 3 (1996)</a> <b class="navlabel">Next: </b><a accesskey="n" class="sectref" href="dq3_pond.html">5.33. オルレラの泉</a></div>
  </body>
</html>
