<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>5.10. 店屋解析</title>
    <link rel="stylesheet" type="text/css" href="dqbook.css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.79.1" />
    <link rel="home" href="index.html" title="ドラクエ命" />
    <link rel="up" href="dq3.html" title="第 5 章 SFC 版ドラクエ 3 (1996)" />
    <link rel="prev" href="dq3_sistersave.html" title="5.9. シスターセーブ解析" />
    <link rel="next" href="dq3_overcharge.html" title="5.11. ふっかけ店屋解析" />
  </head>
  <body>
    <div class="navigation"><table><tr><td class="online-navigation"><a href="dq3_sistersave.html" title="5.9. シスターセーブ解析"><img src="image/docbook/prev.png" alt="戻る" /></a></td><td class="online-navigation"><a href="dq3.html" title="第 5 章 SFC 版ドラクエ 3 (1996)"><img src="image/docbook/up.png" alt="上に戻る" /></a></td><td class="online-navigation"><a href="dq3_overcharge.html" title="5.11. ふっかけ店屋解析"><img src="image/docbook/next.png" alt="次へ" /></a></td><td>ドラクエ命</td><td class="online-navigation"><a href="index.html" title="ドラクエ命"><img src="image/docbook/home.png" alt="ホーム" /></a></td><td class="online-navigation"><a href="" title=""><img src="image/docbook/index.png" alt="索引" /></a></td></tr></table><b class="navlabel">Previous: </b><a accesskey="p" class="sectref" href="dq3_sistersave.html">5.9. シスターセーブ解析</a> <b class="navlabel">Up: </b><a accesskey="u" class="sectref" href="dq3.html">第 5 章 SFC 版ドラクエ 3 (1996)</a> <b class="navlabel">Next: </b><a accesskey="n" class="sectref" href="dq3_overcharge.html">5.11. ふっかけ店屋解析</a><hr /></div>
    <div class="section">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title" style="clear: both"><a id="dq3.shop"></a>5.10. 店屋解析</h2>
          </div>
        </div>
      </div>
      <div class="toc">
        <dl class="toc">
          <dt>
            <span class="section">
              <a href="dq3_shop.html#dq3.shop.hack">5.10.1. 解析</a>
            </span>
          </dt>
          <dd>
            <dl>
              <dt>
                <span class="section">
                  <a href="dq3_shop.html#dq3.shop.hack.C3C77C">5.10.1.1. 店屋共通処理サブルーチン</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="dq3_shop.html#dq3.shop.hack.C3C7EF">5.10.1.2. 「かいにきた」処理サブルーチン</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="dq3_shop.html#dq3.shop.hack.C3CA2A">5.10.1.3. 台詞</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="dq3_shop.html#dq3.shop.hack.C3CB74">5.10.1.4. 呪い装備中（かいにきた版）</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="dq3_shop.html#dq3.shop.hack.C3CBBE">5.10.1.5. 呪い装備中（うりにきた版）</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="dq3_shop.html#dq3.shop.hack.C3CC21">5.10.1.6. 所持金が足りるかテスト</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="dq3_shop.html#dq3.shop.hack.C3CC37">5.10.1.7. 購入代金を計算する</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="dq3_shop.html#dq3.shop.hack.C3CC51">5.10.1.8. 買いトランザクション</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="dq3_shop.html#dq3.shop.hack.C3CCB1">5.10.1.9. 「うりにきた」処理サブルーチン</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="dq3_shop.html#dq3.shop.hack.C3CE2A">5.10.1.10. 所持金の増え方を調べる</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="dq3_shop.html#dq3.shop.hack.C3CE5B">5.10.1.11. 売りトランザクション</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="dq3_shop.html#dq3.shop.hack.C3CE93">5.10.1.12. パーティまたはふくろにアイテムがあるか調べる</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="dq3_shop.html#dq3.shop.hack.C3CEC6">5.10.1.13. 店屋構造体アクセスサブルーチン</a>
                </span>
              </dt>
            </dl>
          </dd>
        </dl>
      </div>
      <a id="term.dq3.shop" class="indexterm"></a>
      <p>
本節では武器と防具の店、道具屋、そしてよろず屋に共通する処理部のコードを解析する。
店屋の処理を細かく分解すると、パーティーの所持金の変更、仲間キャラクターの持ち物状態の変更、
仲間キャラクターの状態テスト等、総合的な機能を有したサブルーチンの合成物の様相を呈している。
</p>
      <div class="section">
        <div class="titlepage">
          <div>
            <div>
              <h3 class="title"><a id="dq3.shop.hack"></a>5.10.1. 解析</h3>
            </div>
          </div>
        </div>
        <div class="section">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title"><a id="dq3.shop.hack.C3C77C"></a>5.10.1.1. 店屋共通処理サブルーチン</h4>
              </div>
            </div>
          </div>
          <p>
店屋共通処理サブルーチンは <code class="varname">$C3C77C</code> に定義されている。
武器と防具の店、道具屋、よろず屋の処理を一手に引き受ける。
これらの唯一の違いである台詞まわしの差だが、この実現方法は、
<a class="link" href="dq3_king.html#dq3.king.hack.C3C07E" title="5.8.1.1. 王様共通処理サブルーチン">王様共通処理サブルーチン</a>と同じだ。
</p>
          <p>
サブルーチン <code class="varname">$C3C77C</code> の処理内容のアウトラインを以下に示す。
なお、解読していないコードや、本処理とは本質的に関係しない細部の説明は省く。
</p>
          <div class="itemizedlist">
            <ul class="itemizedlist" style="list-style-type: disc; ">
              <li class="listitem">
                <p>【事前条件】</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					<code class="code">A == 店屋構造体 ID</code>
				</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>
			<code class="code">$7E3538 &amp; #$003F</code> 部分のビットをセットするためにサブルーチン <code class="varname">$C902E9</code> を呼び出す
			（意図不明）。
		</p>
              </li>
              <li class="listitem">
                <p>
			<a class="link" href="dq3_shop.html#dq3.shop.hack.C3CEC6" title="5.10.1.13. 店屋構造体アクセスサブルーチン">店屋構造体アクセスサブルーチン</a>を呼び出す。
		</p>
              </li>
              <li class="listitem">
                <p>
			<code class="code">X = $2BB2; 店屋の台詞パターン</code>
		</p>
              </li>
              <li class="listitem">
                <p>
			「ここは武器と防具の店だ」系統の台詞 (ID: <code class="varname">$C3CA2A,X</code>) を表示する。
		</p>
              </li>
              <li class="listitem">
                <p>【かいにきた・うりにきた・やめる】</p>
                <p>
			用事を尋ねるウィンドウを表示して、プレイヤーの入力を待つ。
		</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					キャンセルボタン抜け or やめる ⇒【終了】へジャンプ
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					かいにきた ⇒【かいにきた】へジャンプ
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					うりにきた ⇒【うりにきた】へジャンプ
				</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>【終了】</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					「また来てくれよな」系統の台詞 (ID: <code class="varname">$C3CB56,X</code>) を表示する。
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					呼び出し元に制御を戻す。
				</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>【かいにきた】</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					<a class="link" href="dq3_shop.html#dq3.shop.hack.C3C7EF" title="5.10.1.2. 「かいにきた」処理サブルーチン">「かいにきた」処理サブルーチン</a>を呼び出す
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					【他に用は】へジャンプ
				</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>【うりにきた】</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					<a class="link" href="dq3_shop.html#dq3.shop.hack.C3CCB1" title="5.10.1.9. 「うりにきた」処理サブルーチン">「うりにきた」処理サブルーチン</a>を呼び出す
				</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>【他に用は】</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					「ほかにも用はあるかね？」系統の台詞 (<code class="varname">$C3CB4C,X</code>) を表示する。
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					【かいにきた・うりにきた・やめる】へジャンプ
				</p>
                    </li>
                  </ul>
                </div>
              </li>
            </ul>
          </div>
          <p>
このサブルーチンは、プレイヤーが選択したメニュー項目次第で、
専用の補助サブルーチンに処理を委譲するということに徹している。
</p>
        </div>
        <div class="section">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title"><a id="dq3.shop.hack.C3C7EF"></a>5.10.1.2. 「かいにきた」処理サブルーチン</h4>
              </div>
            </div>
          </div>
          <p>
サブルーチン <code class="varname">$C3C7EF</code> は「かいにきた」を選択した場合の処理だ。
</p>
          <div class="itemizedlist">
            <ul class="itemizedlist" style="list-style-type: disc; ">
              <li class="listitem">
                <p>【事前条件】</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					<code class="code">X == 店屋の台詞タイプを表す数値</code>
				</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>
			「なにを買うかね？」系統の台詞 (ID: <code class="varname">$C3CA34,X</code>) を表示する。
		</p>
              </li>
              <li class="listitem">
                <p>【かいにきた序盤】</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					サブルーチン <code class="varname">$C3CF84</code> を呼び出し、<code class="code">$2BE2,X = #$01</code> (<code class="code">X = 0..7</code>) とする。
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					<code class="code">$33BA = $33A0</code>; 商品リストウィンドウでの選択位置
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					まとめ買い対応かどうか (<code class="varname">$2BB8</code>) をテストする。
					このフラグにより、商品をリストするウィンドウの型が異なる。
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					商品リストウィンドウを表示して、プレイヤーの入力を待つ。
				</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>【商品選択直後】</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					サブルーチン <code class="varname">$C32413</code> を呼び出す (<code class="code">$33B6 |= #$4000</code>) 
				</p>
                      <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: square; ">
                          <li class="listitem">
                            <p>
							キャンセルボタン ⇒ 呼び出し元に制御を戻す。
						</p>
                          </li>
                        </ul>
                      </div>
                    </li>
                    <li class="listitem">
                      <p>
					<code class="code">$33DA = 選択した商品のリスト順序</code>
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					<code class="code">$33DA = 選択した商品のアイテム ID</code>
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					<code class="code">$33E2 = 選択した商品の単価</code>（ただし <code class="literal">4</code> バイト長）
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					<code class="code">$33E6 = 選択した商品の購入個数</code>
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					<a class="link" href="dq3_shop.html#dq3.shop.hack.C3CC21" title="5.10.1.6. 所持金が足りるかテスト">サブルーチン <code class="varname">$C3CC21</code></a> を呼び出し、
					所持金が十分あるかテストする。不足している場合、
				</p>
                      <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: square; ">
                          <li class="listitem">
                            <p>
							「おっと残念だがお金が足りないようだ」系統の台詞 (ID: <code class="varname">$C3CA3E,X</code>) を表示する。
						</p>
                          </li>
                          <li class="listitem">
                            <p>
							呼び出し元に制御を戻す。
						</p>
                          </li>
                        </ul>
                      </div>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>【トランザクション直後】</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					購入個数 (<code class="varname">$33E6</code>) をテストする。
				</p>
                      <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: square; ">
                          <li class="listitem">
                            <p>
							<code class="literal">1</code> でなければ、「○○○○ ×個だね。どうもありがとう」系統の台詞 (ID: <code class="varname">$C3CA52,X</code>) を表示する。
						</p>
                          </li>
                          <li class="listitem">
                            <p>
							<code class="literal">1</code> ならば、「○○○○だね。どうもありがとう」系統の台詞 (ID: <code class="varname">$C3CA48,X</code>) を表示する。
						</p>
                          </li>
                        </ul>
                      </div>
                    </li>
                    <li class="listitem">
                      <p>
					<code class="code">A = $33DA; アイテム ID</code>
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					アイテム種別取得サブルーチン <code class="varname">$C44FE2</code> を呼び出し、
					アイテム (<code class="varname">A</code>) の種別（武器とか装飾品とか）を取得 (<code class="varname">A</code>) する。
				</p>
                      <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: square; ">
                          <li class="listitem">
                            <p>
							<code class="code">A == 5</code> ⇒【だれが持つ】へジャンプ。
						</p>
                          </li>
                        </ul>
                      </div>
                    </li>
                    <li class="listitem">
                      <p>
					<code class="code">A = $33DA; アイテム ID</code>
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					アイテムサブルーチン <code class="varname">$C451A3</code> を呼び出し、
					装備可能なアイテム (<code class="varname">A</code>) が戦闘中に利用できるものかどうかを調べる。
				</p>
                      <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: square; ">
                          <li class="listitem">
                            <p>
							戦闘中の特別な利用法がなければ、【だれが持つ】へジャンプ。
						</p>
                          </li>
                        </ul>
                      </div>
                    </li>
                    <li class="listitem">
                      <p>
					「これは戦いのときに道具として使っても～」系統の台詞 (ID: <code class="varname">$C3CA5C,X</code>) を表示する。
				</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>【だれが持つ】</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					「だれが持つかね？」系統の台詞 (ID: <code class="varname">$C3CA66,X</code>) を表示する。
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					<code class="code">$33BA = $33A4</code>; 「だれが」ウィンドウの選択位置
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					「だれが」ウィンドウ（と持ち物ウィンドウ）を表示して、入力を待つ。
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					サブルーチン <code class="varname">$C32413</code> を呼び出す (<code class="code">$33B6 |= #$4000</code>) 
				</p>
                      <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: square; ">
                          <li class="listitem">
                            <p>
							キャンセルボタン ⇒ 呼び出し元に制御を戻す。
						</p>
                          </li>
                        </ul>
                      </div>
                    </li>
                    <li class="listitem">
                      <p>
					<code class="code">$33D6 = $33A4 = $BE7D = だれウィンドウの順番</code>
				</p>
                      <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: square; ">
                          <li class="listitem">
                            <p>
							<code class="code">Overflow == 1</code> ⇒【ふくろに入れる】へジャンプ。
						</p>
                          </li>
                        </ul>
                      </div>
                    </li>
                    <li class="listitem">
                      <p>
					キャラクターの持ち物個数取得サブルーチン <code class="varname">$C446A4</code> を呼び出し、
					選択したキャラクター (<code class="varname">A</code>) の持ち物の個数を取得 (<code class="varname">Y</code>) する。
				</p>
                      <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: square; ">
                          <li class="listitem">
                            <p>
							現在の持ち物の個数が <code class="literal">12</code> より小さければ【整理直後】へジャンプ。
						</p>
                          </li>
                        </ul>
                      </div>
                    </li>
                    <li class="listitem">
                      <p>
					「持ちものを整理するかい？」系統の台詞 (ID: <code class="varname">$C3CA70,X</code>) を表示する。
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					「はい・いいえ」ウィンドウを表示して、プレイヤーの入力を待つ。
				</p>
                      <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: square; ">
                          <li class="listitem">
                            <p>
							キャンセルボタン or 「いいえ」⇒【他の人が持つ】へジャンプ。
						</p>
                          </li>
                        </ul>
                      </div>
                    </li>
                    <li class="listitem">
                      <p>
					<code class="code">A = $33D6</code>; だれ
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					サブルーチン <code class="varname">$C3BD17</code> を呼び出し、選択キャラクターの装備状態に何らかの操作をする。
					未調査。
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					再びキャラクターの持ち物個数取得サブルーチン <code class="varname">$C446A4</code> を呼び出し、
					選択したキャラクター (<code class="varname">A</code>) の持ち物の個数を取得 (<code class="varname">Y</code>) する。
				</p>
                      <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: square; ">
                          <li class="listitem">
                            <p>
							持ち物の個数が <code class="literal">12</code> 以上 ⇒【大事なものばかり】へジャンプ。
						</p>
                          </li>
                        </ul>
                      </div>
                    </li>
                    <li class="listitem">
                      <p>
					「よし！ 整理したぜ」系統の台詞 (ID: <code class="varname">$C3CA7A,X</code>) を表示する。
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					【整理直後】へジャンプ。
				</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>【大事なものばかり】</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					「おや？ ○○○○の持ちものは大事なものばかりで～」系統の台詞 (ID: <code class="varname">$C3CA84,X</code>) を表示する。
				</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>【他の人が持つ】</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					「ほかの人が持つかね？」系統の台詞 (ID: <code class="varname">$C3CA8E,X</code>) を表示する。
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					「はい・いいえ」ウィンドウを表示して、プレイヤーの入力を待つ。
				</p>
                      <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: square; ">
                          <li class="listitem">
                            <p>
							キャンセルボタン or 「いいえ」⇒ 呼び出し元に制御を戻す。
						</p>
                          </li>
                        </ul>
                      </div>
                    </li>
                    <li class="listitem">
                      <p>
					【だれが持つ】へジャンプ。
				</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>【ふくろに入れる】</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					<a class="link" href="dq3_shop.html#dq3.shop.hack.C3CC51" title="5.10.1.8. 買いトランザクション">サブルーチン <code class="varname">$C3CC51</code></a> を呼び出し、
					買いトランザクションを実行する。
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					「じゃあ そのふくろにいれておくぜ」系統の台詞 (ID: <code class="varname">$C3CA98,X</code>) を表示する。
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					【所持金がゼロか調べる】へジャンプ。
				</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>【整理直後】</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					<code class="code">A = $33DA</code>; アイテム ID
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					アイテム種別サブルーチン <code class="varname">$C44FE2</code> を呼び出し、
					アイテム (<code class="varname">A</code>) の種別を取得 (<code class="varname">Y</code>) する。
				</p>
                      <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: square; ">
                          <li class="listitem">
                            <p>
							種別が <code class="literal">5</code> ⇒【キャラクターに持たせる】へジャンプ。
						</p>
                          </li>
                        </ul>
                      </div>
                    </li>
                    <li class="listitem">
                      <p>
					<code class="code">Y = $33D6</code>; だれ
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					キャラクターパラメータ計算サブルーチン <code class="varname">$C44A72</code> を呼び出し、
					キャラクター (<code class="varname">Y</code>) がアイテム (<code class="varname">A</code>) を装備するときのパラメータ変化を計算する。
				</p>
                      <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: square; ">
                          <li class="listitem">
                            <p>
							選択キャラクターがアイテムを装備できない場合は【装備できないが】へジャンプ。
						</p>
                          </li>
                        </ul>
                      </div>
                    </li>
                    <li class="listitem">
                      <p>
					「ここで装備していくかい？」系統の台詞 (ID: <code class="varname">$C3CAAC,X</code>) を表示する。
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					「はい・いいえ」ウィンドウを表示して、プレイヤーの入力を待つ。
				</p>
                      <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: square; ">
                          <li class="listitem">
                            <p>
							キャンセルボタン or 「いいえ」⇒【キャラクターに持たせる】へジャンプ。
						</p>
                          </li>
                        </ul>
                      </div>
                    </li>
                    <li class="listitem">
                      <p>
					<a class="link" href="dq3_shop.html#dq3.shop.hack.C3CB74" title="5.10.1.4. 呪い装備中（かいにきた版）">サブルーチン <code class="varname">$CB74</code></a> を呼び出す。
					選択キャラクターが呪われた装備をしているかどうかのテストだ。
				</p>
                      <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: square; ">
                          <li class="listitem">
                            <p>
							呪われている ⇒【装備品の変更なし】へジャンプ。
						</p>
                          </li>
                        </ul>
                      </div>
                    </li>
                    <li class="listitem">
                      <p>
					<a class="link" href="dq3_shop.html#dq3.shop.hack.C3CC51" title="5.10.1.8. 買いトランザクション">サブルーチン <code class="varname">$C3CC51</code></a> を呼び出し、
					買いトランザクションを実行する。
					（このときの <code class="varname">Carry</code> ビットを憶えておく）
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					<code class="code">A = $33D6</code>; だれ
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					再びキャラクターの持ち物個数取得サブルーチン <code class="varname">$C446A4</code> を呼び出し、
					選択したキャラクター (<code class="varname">A</code>) の持ち物の個数を取得 (<code class="varname">Y</code>) する。
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					--Y
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					キャラクター装備品更新サブルーチン <code class="varname">$C44C1B</code> を呼び出し、
					選択キャラクター (<code class="varname">A</code>) の装備品を更新する。
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					メッセージ「○○○○は××××を装備させてもらった！」(ID: <code class="literal">#$011B</code>) を表示する。
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					憶えておいた <code class="varname">Carry</code> ビットをテストする。
				</p>
                      <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: square; ">
                          <li class="listitem">
                            <p>
							<code class="code">Carry == 1</code> ⇒【持ちきれない分は～】へジャンプ。
						</p>
                          </li>
                        </ul>
                      </div>
                    </li>
                    <li class="listitem">
                      <p>
					【所持金がゼロか調べる】へジャンプ。
				</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>【装備できないが】</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					「○○○○は これを装備できないが～？」系統の台詞 (ID: <code class="varname">$C3CAA2,X</code>) を表示する。
				</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>【装備品の変更なし】</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					「はい・いいえ」ウィンドウを表示して、プレイヤーの入力を待つ。
				</p>
                      <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: square; ">
                          <li class="listitem">
                            <p>
							キャンセルボタン or 「いいえ」⇒【他にも買うかね】へジャンプ。
						</p>
                          </li>
                        </ul>
                      </div>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>【キャラクターに持たせる】</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					<a class="link" href="dq3_shop.html#dq3.shop.hack.C3CC51" title="5.10.1.8. 買いトランザクション">サブルーチン $C3CC51</a> を呼び出し、
					買いトランザクションを実行する。
					（このときの <code class="varname">Carry</code> ビットを憶えておく）
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					<code class="code">A = $33D6</code>; だれ
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					キャラクターステータス取得サブルーチン <code class="varname">$C43F87</code> を呼び出し、
					キャラクター (<code class="varname">A</code>) のステータスを取得 (<code class="varname">A</code>) する。
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					<code class="code">A &amp; #$0010</code> をテストし、キャラクターの生死状態を考慮する。
				</p>
                      <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: square; ">
                          <li class="listitem">
                            <p>
							死んでいる ⇒ 「○○○○の棺の中にいれておくよ」系統の台詞 (ID: <code class="varname">$C3CAC0,X</code>) を表示する。
						</p>
                          </li>
                          <li class="listitem">
                            <p>
							生きている ⇒ 「ほらよっ○○○○さん！」系統の台詞 (ID: <code class="varname">$C3CAB6,X</code>) を表示する。
						</p>
                          </li>
                        </ul>
                      </div>
                    </li>
                    <li class="listitem">
                      <p>
					憶えておいた <code class="varname">Carry</code> ビットをテストする。
				</p>
                      <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: square; ">
                          <li class="listitem">
                            <p>
							<code class="code">Carry == 0</code> ⇒【所持金がゼロか調べる】へジャンプ。
						</p>
                          </li>
                        </ul>
                      </div>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>【持ちきれない分は～】</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					「持ちきれなかった分はその袋に～」系統の台詞 (ID: <code class="varname">$C3CAD4,X</code>) を表示する。
				</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>【所持金がゼロか調べる】</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
						所持金サブルーチン <code class="varname">$C45AB0</code> を呼び出し、
						パーティの現在の所持金を取得 (<code class="varname">$70</code>) する。
						ただし <code class="literal">3</code> バイト長で処理する。
					</p>
                      <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: square; ">
                          <li class="listitem">
                            <p>
							<code class="code">$70 == #$000000</code> ⇒ 呼び出し元に制御を戻す。
						</p>
                          </li>
                        </ul>
                      </div>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>【他にも買うかね】</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					「ほかにも買うかね？」系統の台詞 (ID: <code class="varname">$C3CADE,X</code>) を表示する。
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					サブルーチン <code class="varname">$CA1F</code> を呼び出し、
					<code class="code">$BE6B &amp; #$0040 != 0</code> かどうかをテストする
					（意味不明）。
				</p>
                      <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: square; ">
                          <li class="listitem">
                            <p>
							キャンセル ⇒ 呼び出し元に制御を戻す。
						</p>
                          </li>
                        </ul>
                      </div>
                    </li>
                    <li class="listitem">
                      <p>
					【かいにきた序盤】へジャンプ。
				</p>
                    </li>
                  </ul>
                </div>
              </li>
            </ul>
          </div>
        </div>
        <div class="section">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title"><a id="dq3.shop.hack.C3CA2A"></a>5.10.1.3. 台詞</h4>
              </div>
            </div>
          </div>
          <p>
ここで台詞処理について整理しておく。
アドレス <code class="varname">$C3CA2A</code> から各種店屋の台詞 ID が定義されている。
例えば「ようこそ」を表示するために店屋の種類 (<code class="varname">X</code>) ごとに <code class="literal">5</code> タイプの台詞が用意されている。
Opcode <code class="literal">#$BF</code> の <code class="code">LDA</code> 命令で以下のアドレスから ID 値をロードして、
台詞表示サブルーチン <code class="varname">$C1A95A</code> で店屋の台詞を表示している。
</p>
          <div class="table">
            <a id="table.dq3.C3CA2A"></a>
            <p class="title">
              <strong>表 5.20 店屋台詞集</strong>
            </p>
            <div class="table-contents">
              <table id="table.dq3.C3CA2A" class="lighttable">
                <thead>
                  <tr>
                    <th>Address</th>
                    <th>X == 0 のときの台詞</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>
                      <code class="varname">$C3CA2A,X</code>
                    </td>
                    <td>[D6]ここは 武器と防具の店だ。[AD]どんな用だい？[AC]</td>
                  </tr>
                  <tr>
                    <td>
                      <code class="varname">$C3CA34,X</code>
                    </td>
                    <td>[D6]なにを 買うかね？[AF][AC]</td>
                  </tr>
                  <tr>
                    <td>
                      <code class="varname">$C3CA3E,X</code>
                    </td>
                    <td>[D6]おっと ざんねんだが[AD]お金が たりないようだ。[AF][AC]</td>
                  </tr>
                  <tr>
                    <td>
                      <code class="varname">$C3CA48,X</code>
                    </td>
                    <td>[D6][B5]だね。[AD]どうも ありがとう。[AF][AC]</td>
                  </tr>
                  <tr>
                    <td>
                      <code class="varname">$C3CA52,X</code>
                    </td>
                    <td>[D6][B5] [BB]個だね。[AD]どうも ありがとう。[AF][AC]</td>
                  </tr>
                  <tr>
                    <td>
                      <code class="varname">$C3CA5C,X</code>
                    </td>
                    <td>[D6]これは 戦いのときに[AD]どうぐとして 使っても[AD]効力が あるよ。[AF][AC]</td>
                  </tr>
                  <tr>
                    <td>
                      <code class="varname">$C3CA66,X</code>
                    </td>
                    <td>[D6]だれが 持つかね？[AF][AC]</td>
                  </tr>
                  <tr>
                    <td>
                      <code class="varname">$C3CA70,X</code>
                    </td>
                    <td>[D6]おや？ わるいが [C0]は[AD]それ以上 持てないみたいだ。[AD]持ちものを 整理するかい？[AC]</td>
                  </tr>
                  <tr>
                    <td>
                      <code class="varname">$C3CA7A,X</code>
                    </td>
                    <td>[D6]よし！ 整理したぜ。[AF][AC]</td>
                  </tr>
                  <tr>
                    <td>
                      <code class="varname">$C3CA84,X</code>
                    </td>
                    <td>[D6]おや？ しかし [C0]の[AD]持ちものは 大事なものばかりで[AD]勝手に 整理できないぞ。[AF][AC]</td>
                  </tr>
                  <tr>
                    <td>
                      <code class="varname">$C3CA8E,X</code>
                    </td>
                    <td>[D6]ほかの人が 持つかね？[AC]</td>
                  </tr>
                  <tr>
                    <td>
                      <code class="varname">$C3CA98,X</code>
                    </td>
                    <td>[D6]じゃあ その [C3]に[AD]いれておくぜ！[AF][AC]</td>
                  </tr>
                  <tr>
                    <td>
                      <code class="varname">$C3CAA2,X</code>
                    </td>
                    <td>[D6][C0]は これを[AD]そうびできないが[AD]それでも いいかね？[AC]</td>
                  </tr>
                  <tr>
                    <td>
                      <code class="varname">$C3CAAC,X</code>
                    </td>
                    <td>[D6]ここで そうび していくかい？[AC]</td>
                  </tr>
                  <tr>
                    <td>
                      <code class="varname">$C3CAB6,X</code>
                    </td>
                    <td>[D6]ほらよっ [C0]さん！[AF][AC]</td>
                  </tr>
                  <tr>
                    <td>
                      <code class="varname">$C3CAC0,X</code>
                    </td>
                    <td>[D6]じゃあ [C0]の[AD]ひつぎの中に いれておくよ。[AF][AC]</td>
                  </tr>
                  <tr>
                    <td>
                      <code class="varname">$C3CACA,X</code>
                    </td>
                    <td>[AC]</td>
                  </tr>
                  <tr>
                    <td>
                      <code class="varname">$C3CAD4,X</code>
                    </td>
                    <td>[D6]持ちきれなかったぶんは[AD]その[C3]に いれておくよ。[AF][AC]</td>
                  </tr>
                  <tr>
                    <td>
                      <code class="varname">$C3CADE,X</code>
                    </td>
                    <td>[D6]ほかにも 買うかね？[AF][AC]</td>
                  </tr>
                  <tr>
                    <td>
                      <code class="varname">$C3CAE8,X</code>
                    </td>
                    <td>[D6]だれが 売ってくれるんだい？[AF][AC]</td>
                  </tr>
                  <tr>
                    <td>
                      <code class="varname">$C3CAF2,X</code>
                    </td>
                    <td>[D6]おや？ でも [C0]は[AD]なんにも 持ってないぜ。[AF][AC]</td>
                  </tr>
                  <tr>
                    <td>
                      <code class="varname">$C3CAFC,X</code>
                    </td>
                    <td>[D6]おや？ その [C3]には[AD]なんにも はいってないぜ。[AF][AC]</td>
                  </tr>
                  <tr>
                    <td>
                      <code class="varname">$C3CB06,X</code>
                    </td>
                    <td>[D6]わるいが それは うちでは[AD]買いとれないなあ。[AF][AC]</td>
                  </tr>
                  <tr>
                    <td>
                      <code class="varname">$C3CB10,X</code>
                    </td>
                    <td>[D6]しかし それを 売っちまうと[AD]２度と 手に入らないかも[AD]しれないぜ。 いいのかい？[AC]</td>
                  </tr>
                  <tr>
                    <td>
                      <code class="varname">$C3CB1A,X</code>
                    </td>
                    <td>[D6][B5]だね。[AD][BB]ゴールドで[AD]引きとろう。いいかい？[AC]</td>
                  </tr>
                  <tr>
                    <td>
                      <code class="varname">$C3CB24,X</code>
                    </td>
                    <td>[D6]よし！ たしかに買いとったぜ。[AF][AC]</td>
                  </tr>
                  <tr>
                    <td>
                      <code class="varname">$C3CB2E,X</code>
                    </td>
                    <td>[D6]それは ざんねんだな。[AF][AC]</td>
                  </tr>
                  <tr>
                    <td>
                      <code class="varname">$C3CB38,X</code>
                    </td>
                    <td>[D6]おっと！ 買いとりたいが[AD]それ以上 お金を[AD]持てないみたいだぜっ。[AF][AD]売るまえに うちで[AD]なにか 買っていきなよ。[AF][AC]</td>
                  </tr>
                  <tr>
                    <td>
                      <code class="varname">$C3CB42,X</code>
                    </td>
                    <td>[D6]ほかにも 売ってくれるかい？[AF][AC]</td>
                  </tr>
                  <tr>
                    <td>
                      <code class="varname">$C3CB4C,X</code>
                    </td>
                    <td>[D6]ほかにも 用は あるかね？[AC]</td>
                  </tr>
                  <tr>
                    <td>
                      <code class="varname">$C3CB56,X</code>
                    </td>
                    <td>[D6]また 来てくれよなっ！[AC]</td>
                  </tr>
                  <tr>
                    <td>
                      <code class="varname">$C3CB60,X</code>
                    </td>
                    <td>[D6]わっ びっくりした！ その[AD][B5]は 呪いで[AD]はずれないようだぜ。[AF][AD]しょうがないなあ… とりあえず[AD]受けとっておくれよ。[AC]</td>
                  </tr>
                  <tr>
                    <td>
                      <code class="varname">$C3CB6A,X</code>
                    </td>
                    <td>[D6]うわっと！ こいつは おどろいた！[AD]買いとりたいのは やまやまだが[AD]呪いで はずれないようだぜ。[AF][AC]</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          <br class="table-break" />
        </div>
        <div class="section">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title"><a id="dq3.shop.hack.C3CB74"></a>5.10.1.4. 呪い装備中（かいにきた版）</h4>
              </div>
            </div>
          </div>
          <p>
サブルーチン <code class="varname">$CB74</code> は
「装備するための品物を買い、ついでに装備させてもらおうとしたが、
今装備しているものが呪われている」ときに呼び出される。
</p>
          <div class="itemizedlist">
            <ul class="itemizedlist" style="list-style-type: disc; ">
              <li class="listitem">
                <p>【事前条件】</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					<code class="code">$33D6 == だれウィンドウの順番</code>
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					<code class="code">$33DA == 購入する品物のアイテム ID</code>
				</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>
			アイテム種別取得サブルーチン <code class="varname">$C44FE2</code> を呼び出し、
			アイテム (<code class="varname">A</code>) の種別を取得 (<code class="varname">A</code>) する。
		</p>
              </li>
              <li class="listitem">
                <p>
			キャラクターの装備品取得サブルーチン <code class="varname">$C44A03</code> を呼び出し、
			キャラクター (<code class="varname">Y</code>) が装備しているアイテム種別 <code class="varname">A</code> のアイテム ID を取得 (<code class="varname">A</code>) する。
		</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					指定したアイテム種別のアイテムを装備していない ⇒【<code class="varname">Carry</code> クリア】へジャンプ。
				</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>
			アイテム呪い属性取得サブルーチンを呼び出し、
			装備アイテム (<code class="varname">A</code>) に呪い属性があるか否かをテスト (<code class="varname">Carry</code>) する。
		</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					呪い属性がない ⇒【<code class="varname">Carry</code> クリア】へジャンプ。
				</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>
			効果音 (ID: <code class="literal">#$002A</code>) を鳴らし、鳴り終わるまで待つ。
		</p>
              </li>
              <li class="listitem">
                <p>
			<code class="code">A = $C3CB60,X</code>; メッセージ ID
		</p>
              </li>
              <li class="listitem">
                <p>
			台詞「わっ びっくりした！ その××××は呪いで外れないようだぜ」(ID: <code class="varname">A</code>) を表示する。
		</p>
              </li>
              <li class="listitem">
                <p>
			<code class="code">Carry = 1</code>
		</p>
              </li>
              <li class="listitem">
                <p>
			【終了】へジャンプ。
		</p>
              </li>
              <li class="listitem">
                <p>【<code class="varname">Carry</code> クリア】</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					<code class="code">Carry = 0</code>
				</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>【終了】</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					呼び出し元に制御を戻す。
				</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>【事後条件】</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					<code class="code">Carry == 1</code> ⇔ 呪われているため、買った品物を装備させてもらえなかった
				</p>
                    </li>
                  </ul>
                </div>
              </li>
            </ul>
          </div>
        </div>
        <div class="section">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title"><a id="dq3.shop.hack.C3CBBE"></a>5.10.1.5. 呪い装備中（うりにきた版）</h4>
              </div>
            </div>
          </div>
          <p>
サブルーチン <code class="varname">$CBBE</code> は持ち物を売ろうとするときに呼び出される。
</p>
          <div class="itemizedlist">
            <ul class="itemizedlist" style="list-style-type: disc; ">
              <li class="listitem">
                <p>【事前条件】</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					<code class="code">$33D6 == だれウィンドウの順番</code>
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					<code class="code">$33DA == 売りたい持ち物のアイテム ID</code>
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					<code class="code">$33DC == リストウィンドウでの選択番号</code>
				</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>
			パーティ人数取得サブルーチンを呼び出し、
			パーティの人数を取得 (<code class="varname">A</code>) する。
		</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					<code class="code">$33D6 &gt;= A</code> ⇒ ふくろに入っている道具を売るものとみなし、
					【<code class="varname">Carry</code> クリア】へジャンプ。
				</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>
			<code class="code">A = $33DA</code>; 売りたい持ち物のアイテム ID
		</p>
              </li>
              <li class="listitem">
                <p>
			アイテム種別取得サブルーチン <code class="varname">$C44FE2</code> を呼び出し、
			アイテム (<code class="varname">A</code>) の種別を取得 (<code class="varname">A</code>) する。
		</p>
              </li>
              <li class="listitem">
                <p>
			キャラクターの装備品取得サブルーチン <code class="varname">$C44A03</code> を呼び出し、
			キャラクター (<code class="varname">Y</code>) が装備しているアイテム種別 <code class="varname">A</code> のアイテム ID を取得 (<code class="varname">A</code>) する。
		</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					指定したアイテム種別のアイテムを装備していない ⇒【<code class="varname">Carry</code> クリア】へジャンプ。
				</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>
			アイテム呪い属性取得サブルーチンを呼び出し、
			装備アイテム (<code class="varname">A</code>) に呪い属性があるか否かをテスト (<code class="varname">Carry</code>) する。
		</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					呪い属性がない ⇒【<code class="varname">Carry</code> クリア】へジャンプ。
				</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>
			キャラクター装備アイテム数取得サブルーチン <code class="varname">$C446D6</code> を呼び出し、
			キャラクター (<code class="varname">Y</code>) の装備しているアイテムの総数 (<code class="varname">A</code>) を取得する。
		</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					<code class="code">A - 1 &lt; $33DC</code> ⇒【<code class="varname">Carry</code> クリア】へジャンプ。
				</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>
			効果音 (ID: <code class="literal">#$002A</code>) を鳴らし、鳴り終わるまで待つ。
		</p>
              </li>
              <li class="listitem">
                <p>
			<code class="code">A = $C3CB6A,X</code>; メッセージ ID
		</p>
              </li>
              <li class="listitem">
                <p>
			台詞「買い取りたいのはやまやまだが 呪いで外れないようだぜ」(ID: <code class="varname">A</code>) を表示する。
		</p>
              </li>
              <li class="listitem">
                <p>
			<code class="code">Carry = 1</code>
		</p>
              </li>
              <li class="listitem">
                <p>【<code class="varname">Carry</code> クリア】</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					<code class="code">Carry = 0</code>
				</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>【終了】</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					呼び出し元に制御を戻す。
				</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>【事後条件】</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					<code class="code">Carry == 1</code> ⇔ 売ろうとした装備品が呪われているため、売れなかった
				</p>
                    </li>
                  </ul>
                </div>
              </li>
            </ul>
          </div>
        </div>
        <div class="section">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title"><a id="dq3.shop.hack.C3CC21"></a>5.10.1.6. 所持金が足りるかテスト</h4>
              </div>
            </div>
          </div>
          <p>
サブルーチン <code class="varname">$C3CC21</code> は、店屋で品物を買うことが決まった直後の処理であり、
所持金が足りるかを調べる。
</p>
          <div class="itemizedlist">
            <ul class="itemizedlist" style="list-style-type: disc; ">
              <li class="listitem">
                <p>【事前条件】</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					<a class="link" href="dq3_shop.html#dq3.shop.hack.C3CC37" title="5.10.1.7. 購入代金を計算する">サブルーチン <code class="varname">$CC37</code></a> の事前条件に従う
				</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>
			<a class="link" href="dq3_shop.html#dq3.shop.hack.C3CC37" title="5.10.1.7. 購入代金を計算する">サブルーチン <code class="varname">$CC37</code></a> を呼び出し、
			購入代金を計算、所持金が商品の値段以上であるか否かを調べる。
		</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					所持金が不足している ⇒ <code class="varname">Carry</code> ビットを <code class="literal">0</code> にして、
					【終了】へジャンプ。
				</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>
			所持金加算サブルーチン <code class="varname">$C45B1A</code> を呼び出し、
			先程のサブルーチン内部処理で減算された金額 (<code class="varname">$70</code>) を再び所持金に加算する。
		</p>
              </li>
              <li class="listitem">
                <p>
			<code class="varname">Carry</code> ビットを <code class="literal">1</code> にする
		</p>
              </li>
              <li class="listitem">
                <p>【終了】</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					呼び出し元に制御を戻す。
				</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>【事後条件】</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					<code class="code">Carry == 1</code> ⇔ 所持金が間に合う
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					所持金は変更されていない。
				</p>
                    </li>
                  </ul>
                </div>
              </li>
            </ul>
          </div>
        </div>
        <div class="section">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title"><a id="dq3.shop.hack.C3CC37"></a>5.10.1.7. 購入代金を計算する</h4>
              </div>
            </div>
          </div>
          <p>
サブルーチン <code class="varname">$CC37</code> は購入代金を計算する。
</p>
          <div class="itemizedlist">
            <ul class="itemizedlist" style="list-style-type: disc; ">
              <li class="listitem">
                <p>【事前条件】</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					<code class="code">$33E2 == 商品価格</code>（ただし <code class="literal">4</code> バイト長で比較する）
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					<code class="code">$33E6 == 購入個数</code>
				</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>
			<code class="code">$70 = $33E2</code>; 商品価格（ただし <code class="literal">4</code> バイト長でセット）
		</p>
              </li>
              <li class="listitem">
                <p>
			<code class="code">A = $33E6</code>; 購入個数
		</p>
              </li>
              <li class="listitem">
                <p>
			<code class="code">X = #$0070</code>; 次のサブルーチン呼び出しの中で利用する。
		</p>
              </li>
              <li class="listitem">
                <p>
			汎用乗算サブルーチン <code class="varname">$C01107</code> を呼び出し、<code class="code">$70 *= A</code> を計算する。
		</p>
              </li>
              <li class="listitem">
                <p>
			ゴールド関係サブルーチン <code class="varname">$C45B66</code> を呼び出し、
			所持金 (<code class="varname">$3696</code>) から金額 <code class="varname">$70</code> をマイナスにならないように引けるか調べる。
		</p>
              </li>
              <li class="listitem">
                <p>
			呼び出し元に制御を戻す。
		</p>
              </li>
              <li class="listitem">
                <p>【事後条件】</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					<code class="code">A == 代金の下位 <code class="literal">2</code> バイト</code>
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					<code class="code">Y == 代金の上位 <code class="literal">2</code> バイト</code>; ただしこの上位バイトはゼロ
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					<code class="code">Carry == 1</code> ⇔ 所持金から代金を引いても負にならない
				</p>
                    </li>
                  </ul>
                </div>
              </li>
            </ul>
          </div>
        </div>
        <div class="section">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title"><a id="dq3.shop.hack.C3CC51"></a>5.10.1.8. 買いトランザクション</h4>
              </div>
            </div>
          </div>
          <p>
サブルーチン <code class="varname">$C3CC51</code> は「かいにきた」一回分のトランザクションだ。
</p>
          <div class="itemizedlist">
            <ul class="itemizedlist" style="list-style-type: disc; ">
              <li class="listitem">
                <p>【事前条件】</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					<code class="code">$33D6 == だれウィンドウの順番</code>
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					<code class="code">$33DA == アイテム ID</code>
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					<code class="code">$33E6 == 購入個数</code>
				</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>
			購入する品物が「おうじゃのけん」であるかどうかをテストする。
			もし「おうじゃのけん」であれば、
		</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					フラグビットセットサブルーチン <code class="varname">$C908F0</code> を呼び出し、
					<span class="emphasis"><em><code class="varname">$7E353A</code> 最下位ビットから <code class="literal">#$0053</code> 番目にあるビットをセットする。</em></span>
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					<code class="code">A = #$0023</code>; マイラの道具屋（「おうじゃのけん」抜き）を示す店屋構造体 ID
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					フラグビットセットサブルーチン <code class="varname">$C902E9</code> を呼び出し、
					<span class="emphasis"><em><code class="code">$7E3538 &amp; #$003F</code> 部分のビットをセット (<code class="varname">A</code>) する。</em></span>
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					<a class="link" href="dq3_shop.html#dq3.shop.hack.C3CEC6" title="5.10.1.13. 店屋構造体アクセスサブルーチン">店屋構造体アクセスサブルーチン</a>を呼び出し、
					店屋データをリセット (<code class="varname">A</code>) する。
				</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>
			<a class="link" href="dq3_shop.html#dq3.shop.hack.C3CC37" title="5.10.1.7. 購入代金を計算する">サブルーチン <code class="varname">$CC37</code> </a>を呼び出し、
			購入個数と商品価格の積を求める。
			
		</p>
              </li>
              <li class="listitem">
                <p>
			<code class="code">X = $33E6</code>; 購入個数
		</p>
              </li>
              <li class="listitem">
                <p>
			<code class="code">Y = $33D6</code>; だれウィンドウの順番
		</p>
              </li>
              <li class="listitem">
                <p>
			パーティ人数取得サブルーチン <code class="varname">$C4297C</code> を呼び出し、
			パーティにいる人数を取得 (<code class="varname">A</code>) する。
		</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					<code class="code">$33D6 == A</code> ⇒【ふくろに追加】へジャンプ。
				</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>【キャラクターの持ち物に追加】</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					<code class="code">$33DA = A</code>; 購入アイテム ID
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					キャラクター持ち物更新サブルーチン <code class="varname">$C44739</code> を呼び出し、
					アイテム (<code class="varname">A</code>) を一個、パーティのキャラクター (<code class="varname">Y</code>) の持ち物配列に追加する。
				</p>
                      <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: square; ">
                          <li class="listitem">
                            <p>
							<code class="code">Carry == 1</code> ⇒【ふくろに追加】へジャンプ。
						</p>
                          </li>
                        </ul>
                      </div>
                    </li>
                    <li class="listitem">
                      <p>
					<code class="code">--X</code>; 購入個数をデクリメント
				</p>
                      <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: square; ">
                          <li class="listitem">
                            <p>
							<code class="code">X != 0</code> ⇒【ふくろに追加】へジャンプ。
						</p>
                          </li>
                        </ul>
                      </div>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>
			<code class="code">Carry = 0</code>
		</p>
              </li>
              <li class="listitem">
                <p>
			【終了】へジャンプ。
		</p>
              </li>
              <li class="listitem">
                <p>【ふくろに追加】</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					<code class="code">$33DA = A</code>; 購入アイテム ID
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					ふくろアイテム追加サブルーチン <code class="varname">$C45399</code> を呼び出し、
					ふくろにアイテム (<code class="varname">A</code>) を一個追加する。
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					<code class="code">--X</code>; 購入個数をデクリメント
				</p>
                      <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: square; ">
                          <li class="listitem">
                            <p>
							<code class="code">X != 0</code> ⇒【ふくろに追加】へジャンプ。
						</p>
                          </li>
                        </ul>
                      </div>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>
			<code class="code">Carry = 1</code>
		</p>
              </li>
              <li class="listitem">
                <p>【終了】</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					呼び出し元に制御を戻す。
				</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>【事後条件】</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					<code class="code">Carry == 0</code> ⇔ ふくろの中身は更新しなかった
				</p>
                    </li>
                  </ul>
                </div>
              </li>
            </ul>
          </div>
        </div>
        <div class="section">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title"><a id="dq3.shop.hack.C3CCB1"></a>5.10.1.9. 「うりにきた」処理サブルーチン</h4>
              </div>
            </div>
          </div>
          <p>
サブルーチン <code class="varname">$C3CCB1</code> は「うりにきた」を選択した場合の処理だ。
</p>
          <div class="itemizedlist">
            <ul class="itemizedlist" style="list-style-type: disc; ">
              <li class="listitem">
                <p>【事前条件】</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					<code class="code">X == 店屋の台詞タイプを表す数値</code>
				</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>
			「だれが 売ってくれるんだい？」(ID: <code class="varname">$C3CAE8,X</code>) 系統の台詞を表示する。
		</p>
              </li>
              <li class="listitem">
                <p>【だれがウィンドウ表示】</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					「だれが」ウィンドウとその持ち物をリストしたウィンドウを表示して、プレイヤーの入力を待つ。
				</p>
                      <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: square; ">
                          <li class="listitem">
                            <p>
							「だれが」ウィンドウでキャンセルしたとき、
							【だれがウィンドウをキャンセルした】へジャンプ。
						</p>
                          </li>
                        </ul>
                      </div>
                    </li>
                    <li class="listitem">
                      <p>
					<code class="code">$33D6 = A; $33A2 = A; $BE7D = A</code>; だれウィンドウの順番
				</p>
                      <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: square; ">
                          <li class="listitem">
                            <p>
							ふくろを選択した ⇒【ふくろを選択した】へジャンプ。
						</p>
                          </li>
                          <li class="listitem">
                            <p>
							<code class="code">$2BEE != 0</code> ⇒【キャラクターを選択した】へジャンプ。
						</p>
                          </li>
                        </ul>
                      </div>
                    </li>
                    <li class="listitem">
                      <p>
					サブルーチン <code class="varname">$C32413</code> を呼び出す (<code class="code">$33B6 |= #$4000</code>) 
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					「でも ○○○○は何にも持ってないぜ」系統の台詞 (ID: <code class="varname">$C3CAF2,X</code>) を表示する。
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					呼び出し元に制御を戻す。
				</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>【だれがウィンドウをキャンセルした】</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					サブルーチン <code class="varname">$C32413</code> を呼び出す (<code class="code">$33B6 |= #$4000</code>) 
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					呼び出し元に制御を戻す。
				</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>【キャラクターを選択した】</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					<code class="code">$33B8 = $33D6</code>; だれウィンドウの順番
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					持ち物リストウィンドウでの入力を待つ
				</p>
                      <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: square; ">
                          <li class="listitem">
                            <p>
							キャンセル ⇒【だれがウィンドウ表示】へジャンプ。
						</p>
                          </li>
                        </ul>
                      </div>
                    </li>
                    <li class="listitem">
                      <p>
					<code class="code">$33DA = A</code>; アイテム ID
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					<code class="code">$33DC = $33BE</code>; リストウィンドウでの選択番号
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					サブルーチン <code class="varname">$C32413</code> を呼び出す (<code class="code">$33B6 |= #$4000</code>) 
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					【道具の希少性をテスト】へジャンプ。
				</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>【ふくろを選択した】</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					<code class="code">$2BF0 != 0</code> ⇒
				</p>
                      <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: square; ">
                          <li class="listitem">
                            <p>
							【ふくろ中身選択】へジャンプ。
						</p>
                          </li>
                        </ul>
                      </div>
                    </li>
                    <li class="listitem">
                      <p>
					サブルーチン <code class="varname">$C32413</code> を呼び出す (<code class="code">$33B6 |= #$4000</code>) 
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					「おや？ そのふくろには何にも入ってないぜ」系統の台詞 (ID: <code class="varname">$C3CAFC,X</code>) を表示する。
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					呼び出し元に制御を戻す。
				</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>【ふくろ中身選択】</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					持ち物リストウィンドウでの入力を待つ
				</p>
                      <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: square; ">
                          <li class="listitem">
                            <p>
							キャンセル ⇒【だれがウィンドウ表示】へジャンプ。
						</p>
                          </li>
                        </ul>
                      </div>
                    </li>
                    <li class="listitem">
                      <p>
					<code class="code">$33DA = A</code>; アイテム ID
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					サブルーチン <code class="varname">$C32413</code> を呼び出す (<code class="code">$33B6 |= #$4000</code>) 
				</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>【道具の希少性をテスト】</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					<code class="code">$BE79 = $33DA</code>; アイテム ID
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					アイテムサブルーチン <code class="varname">$C44F00</code> を呼び出し、
					アイテム (<code class="varname">A</code>) の希少性を取得する。
				</p>
                      <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: square; ">
                          <li class="listitem">
                            <p>
							<code class="code">Carry == 1</code> ⇒【売却不可能】へジャンプ。
						</p>
                          </li>
                          <li class="listitem">
                            <p>
							<code class="code">Overflow == 0</code> ⇒【引き取ろう】へジャンプ。
						</p>
                          </li>
                        </ul>
                      </div>
                    </li>
                    <li class="listitem">
                      <p>
					【希少品】へジャンプ。
				</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>【引き取ろう】</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					<code class="code">A = $33DA</code>; アイテム ID
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					アイテム売値取得サブルーチン <code class="varname">$C44EA6</code> を呼び出し、
					アイテム (<code class="varname">A</code>) の売値を取得 (<code class="varname">$70</code>) する。
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					<code class="code">$BE81 = $70</code>; アイテム売値 (<code class="literal">3</code> バイト)
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					「○○○○だね。××××ゴールドで引きとろう」系統の台詞 (ID: <code class="varname">$C3CB1A,X</code>) を表示する。
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					「はい・いいえ」ウィンドウを表示して、プレイヤーの入力を待つ。
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					キャンセルボタン or 「いいえ」⇒
				</p>
                      <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: square; ">
                          <li class="listitem">
                            <p>
							【残念だ】へジャンプ。
						</p>
                          </li>
                        </ul>
                      </div>
                    </li>
                    <li class="listitem">
                      <p>
					<a class="link" href="dq3_shop.html#dq3.shop.hack.C3CE2A" title="5.10.1.10. 所持金の増え方を調べる">サブルーチン <code class="varname">$C3CE2A</code></a> を呼び出し、
					所持金の増え方を調べる。
				</p>
                      <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: square; ">
                          <li class="listitem">
                            <p>
							所持金が上限を超えないような場合は【呪いチェック】へジャンプ。
						</p>
                          </li>
                        </ul>
                      </div>
                    </li>
                    <li class="listitem">
                      <p>
					「それ以上 お金を持てないみたいだぜっ」系統の台詞 (ID: <code class="varname">$C3CB38,X</code>) を表示する。
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					呼び出し元に制御を戻す。
				</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>【売却不可能】</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					<code class="code">A == #$00B1 &amp;&amp; X == #$0008</code> ⇒
				</p>
                      <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: square; ">
                          <li class="listitem">
                            <p>
							【引き取ろう】へジャンプ。
							<span class="emphasis"><em>ある店屋においては、オリハルコンを買い取らせることができる。</em></span>
						</p>
                          </li>
                        </ul>
                      </div>
                    </li>
                    <li class="listitem">
                      <p>
					「悪いがうちでは買いとれないなあ」系統の台詞 (ID: <code class="varname">$C3CB06,X</code>) を表示する。
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					【売り終了後】へジャンプ。
				</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>【呪いチェック】</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					<a class="link" href="dq3_shop.html#dq3.shop.hack.C3CBBE" title="5.10.1.5. 呪い装備中（うりにきた版）">サブルーチン <code class="varname">$CBBE</code></a> を呼び出し、
					キャラクターがそのアイテムを装備していて、なおかつ呪われているかをテストする。
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					そのような場合⇒
				</p>
                      <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: square; ">
                          <li class="listitem">
                            <p>
							【売り終了後】へジャンプ。
						</p>
                          </li>
                        </ul>
                      </div>
                    </li>
                    <li class="listitem">
                      <p>
					<a class="link" href="dq3_shop.html#dq3.shop.hack.C3CE5B" title="5.10.1.11. 売りトランザクション">サブルーチン <code class="varname">$C3CE5B</code></a> を呼び出す。
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					「よし！ たしかに買いとったぜ」系統の台詞 (ID: <code class="varname">$C3CB24,X</code>) を表示する。
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					<code class="code">$33DA == #$00B1</code> ⇒
				</p>
                      <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: square; ">
                          <li class="listitem">
                            <p>
							フラグセットサブルーチン <code class="varname">$C908F0</code> を呼び出し、
							<code class="varname">$7E353E</code> の最下位から <code class="literal">#$009B</code> ビット目のビットを立てる。
						</p>
                          </li>
                        </ul>
                      </div>
                    </li>
                    <li class="listitem">
                      <p>
					【売り終了後】へジャンプ。
				</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>【残念だ】</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					「それは残念だな」系統の台詞 (ID: <code class="varname">$C3CB2E,X</code>) を表示する。
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					【売り終了後】へジャンプ。
				</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>【希少品】</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					「しかしそれを売っちまうと２度と手に入らないかも～」系統の台詞 (ID: <code class="varname">$C3CB10,X</code>) を表示する。
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					「はい・いいえ」ウィンドウを表示して、プレイヤーの入力を待つ。
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					キャンセルボタン or 「いいえ」⇒ 
				</p>
                      <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: square; ">
                          <li class="listitem">
                            <p>
							【売り終了後】へジャンプ。
						</p>
                          </li>
                        </ul>
                      </div>
                    </li>
                    <li class="listitem">
                      <p>
					【引き取ろう】へジャンプ。
				</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>【売り終了後】</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					<a class="link" href="dq3_shop.html#dq3.shop.hack.C3CE93" title="5.10.1.12. パーティまたはふくろにアイテムがあるか調べる">サブルーチン <code class="varname">$C3CE93</code></a> を呼び出し、
					パーティが道具を持っているかどうか調べる。
				</p>
                      <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: square; ">
                          <li class="listitem">
                            <p>
							持っていなければ、呼び出し元に制御を戻す。
						</p>
                          </li>
                        </ul>
                      </div>
                    </li>
                    <li class="listitem">
                      <p>
					<code class="code">$70 = #$000001</code>
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					<a class="link" href="dq3_shop.html#dq3.shop.hack.C3CE2A" title="5.10.1.10. 所持金の増え方を調べる">サブルーチン <code class="varname">$C3CE2A</code></a> を呼び出し、
					現在の所持金に <code class="varname">$70</code> つまり <code class="literal">1</code> を加えて
					<code class="literal">1000000</code> G 以上になるか否かをテストする。
				</p>
                      <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: square; ">
                          <li class="listitem">
                            <p>
							なりそうなときは、呼び出し元に制御を戻す。
						</p>
                          </li>
                        </ul>
                      </div>
                    </li>
                    <li class="listitem">
                      <p>
					「ほかにも売ってくれるかい？」系統の台詞 (ID: <code class="varname">$C3CB42,X</code>) を表示する。
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					サブルーチン <code class="varname">$CA1F</code> を呼び出し、
					<code class="code">$BE6B &amp; #$0040 != 0</code> かどうかをテストする
					（意味不明）。
				</p>
                      <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: square; ">
                          <li class="listitem">
                            <p>
							キャンセル ⇒ 呼び出し元に制御を戻す。
						</p>
                          </li>
                        </ul>
                      </div>
                    </li>
                    <li class="listitem">
                      <p>
					【だれウィンドウ表示】へジャンプ。
				</p>
                    </li>
                  </ul>
                </div>
              </li>
            </ul>
          </div>
        </div>
        <div class="section">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title"><a id="dq3.shop.hack.C3CE2A"></a>5.10.1.10. 所持金の増え方を調べる</h4>
              </div>
            </div>
          </div>
          <p>
サブルーチン <code class="varname">$C3CE2A</code> は、パーティの所持金に金額を加算すると、
それがいくらになるのかを調べる処理だ。
加算結果が <code class="literal">1000000</code> ゴールド以上になるかどうかをも調べる。
</p>
          <div class="itemizedlist">
            <ul class="itemizedlist" style="list-style-type: disc; ">
              <li class="listitem">
                <p>【事前条件】</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					<code class="code">$70 == 加算したい金額</code> (<code class="literal">2</code> バイト)
				</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>
			所持金取得サブルーチン <code class="varname">$C45AB0</code> を呼び出し、
			パーティの所持金を取得 (<code class="varname">$73</code>; <code class="literal">4</code> バイト) する。
		</p>
              </li>
              <li class="listitem">
                <p>
			<code class="code">$73 += $70</code>; <code class="literal">4</code> バイト
		</p>
              </li>
              <li class="listitem">
                <p>
			<code class="code">A = $75 &amp; #$00FF</code>
		</p>
              </li>
              <li class="listitem">
                <p>
			<code class="varname">A</code> の値を見る
		</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					<code class="code">A == #$0000</code> ⇒【終了】へジャンプ
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					<code class="code">A &lt; #$000F</code> ⇒【終了】へジャンプ
				</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>
			<code class="varname">$73</code> と <code class="literal">#$4240</code> を比較し、その結果を <code class="varname">Carry</code> ビットに残す。
		</p>
              </li>
              <li class="listitem">
                <p>【終了】</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					呼び出し元に制御を戻す。
				</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>【事後条件】</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					<code class="code">$73 == パーティ所持金 + $70</code> (<code class="literal">4</code> バイト)
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					<code class="code">Carry == 1</code> ⇔ <code class="code">$73 &gt;= #000F4240</code> (<code class="literal">4</code> バイト)
				</p>
                    </li>
                  </ul>
                </div>
              </li>
            </ul>
          </div>
        </div>
        <div class="section">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title"><a id="dq3.shop.hack.C3CE5B"></a>5.10.1.11. 売りトランザクション</h4>
              </div>
            </div>
          </div>
          <p>
サブルーチン <code class="varname">$C3CE5B</code> は「うりにきた」一回分のトランザクションだ。
二つの更新処理からなり、一つはパーティの所持金の更新で、
もう一つはキャラクターもしくはふくろのアイテムリストの更新だ。
</p>
          <div class="itemizedlist">
            <ul class="itemizedlist" style="list-style-type: disc; ">
              <li class="listitem">
                <p>【事前条件】</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					<code class="code">$33D6 == だれウィンドウの順番</code>
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					<code class="code">$33DA == アイテム ID</code>
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					<code class="code">$33DC == リストウィンドウでの選択番号</code>
				</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>
			<code class="code">X = $33DA</code>; アイテム ID
		</p>
              </li>
              <li class="listitem">
                <p>
			アイテム売値計算サブルーチン <code class="varname">$C44EA6</code> を呼び出し、
			アイテム (<code class="varname">X</code>) の下取価格を取得 (<code class="varname">$70</code>) する。
		</p>
              </li>
              <li class="listitem">
                <p>
			所持金加算サブルーチン <code class="varname">$C45B1A</code> を呼び出し、
			基本的に、所持金 (<code class="varname">$3696</code>) を <code class="varname">$70</code> だけ増やす。
		</p>
              </li>
              <li class="listitem">
                <p>
			パーティ人数取得サブルーチン <code class="varname">$C4297C</code> を呼び出し、
			パーティにいる人数を取得 (<code class="varname">$70</code>) する。
		</p>
              </li>
              <li class="listitem">
                <p>
			<code class="code">$33D6 &lt; $70</code> ⇒
		</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					ふくろアイテム操作サブルーチン <code class="varname">$C453F7</code> を呼び出し、
					ふくろに入っているアイテム (<code class="varname">X</code>) の個数を <code class="literal">1</code> だけ減らす。
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					【終了】へジャンプ。
				</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>
			<code class="code">A = $33D6</code>; だれウィンドウの順番
		</p>
              </li>
              <li class="listitem">
                <p>
			<code class="code">X = $33DC</code>; リストウィンドウでの選択番号
		</p>
              </li>
              <li class="listitem">
                <p>
			キャラクターアイテム操作サブルーチン <code class="varname">$C4487F</code> を呼び出し、
			パーティにいるキャラクター (<code class="varname">A</code>) の持っているアイテム (<code class="varname">X</code>) を削除する。
		</p>
              </li>
              <li class="listitem">
                <p>【終了】</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					呼び出し元に制御を戻す。
				</p>
                    </li>
                  </ul>
                </div>
              </li>
            </ul>
          </div>
        </div>
        <div class="section">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title"><a id="dq3.shop.hack.C3CE93"></a>5.10.1.12. パーティまたはふくろにアイテムがあるか調べる</h4>
              </div>
            </div>
          </div>
          <p>
サブルーチン <code class="varname">$C3CE93</code> は、パーティの各キャラクターが何かアイテムを持っているか、
またはふくろの中にアイテムが入っているかどうかを調べる。
処理の概略は以下のようになっている。
</p>
          <div class="itemizedlist">
            <ul class="itemizedlist" style="list-style-type: disc; ">
              <li class="listitem">
                <p>
			パーティ人数取得サブルーチンを呼び出し、
			パーティの人数を取得 (<code class="varname">X</code>) する。
		</p>
              </li>
              <li class="listitem">
                <p>
			<code class="code">$70 = 0</code>; カウンターとして利用する。
		</p>
              </li>
              <li class="listitem">
                <p>【パーティの持ち物の個数を数える】</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					<code class="code">--X</code>; キャラクターのパーティ内での並び順
				</p>
                      <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: square; ">
                          <li class="listitem">
                            <p>
							<code class="code">X &lt; 0</code> ⇒【ふくろのアイテムの個数を数える】へジャンプ。
						</p>
                          </li>
                        </ul>
                      </div>
                    </li>
                    <li class="listitem">
                      <p>
					サブルーチン <code class="varname">$C446A4</code> を呼び出し、
					キャラクター (<code class="varname">X</code>) の持ち物の個数を取得 (<code class="varname">A</code>) する。
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					<code class="code">$70 += A</code>; 持ち物の個数を加算
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					【パーティの持ち物の個数を数える】へジャンプ。
				</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>【ふくろのアイテムの個数を数える】</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					<code class="code">A = $70</code>; パーティの持ち物の個数
				</p>
                    </li>
                    <li class="listitem">
                      <p>
					もし <code class="varname">A</code> がゼロでなければ、
				</p>
                      <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: square; ">
                          <li class="listitem">
                            <p>
							サブルーチン <code class="varname">$C3305F</code> を呼び出し、
							ふくろにしまってある相異なるアイテムの個数を取得 (<code class="varname">$2BF0</code>) する。
						</p>
                          </li>
                          <li class="listitem">
                            <p>
							<code class="varname">$2BF0</code> がゼロ ⇒
						</p>
                            <div class="itemizedlist">
                              <ul class="itemizedlist" style="list-style-type: disc; ">
                                <li class="listitem">
                                  <p>
									<code class="code">Carry = 0</code>
								</p>
                                </li>
                                <li class="listitem">
                                  <p>
									【終了】へジャンプ。
								</p>
                                </li>
                              </ul>
                            </div>
                          </li>
                        </ul>
                      </div>
                    </li>
                    <li class="listitem">
                      <p>
					<code class="code">Carry = 1</code>
				</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>【終了】</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					呼び出し元に制御を戻す。
				</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>【事後条件】</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					<code class="code">Carry == 1</code> ⇔ パーティの持ち物またはふくろの中身になんらかのアイテムがある
				</p>
                    </li>
                  </ul>
                </div>
              </li>
            </ul>
          </div>
        </div>
        <div class="section">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title"><a id="dq3.shop.hack.C3CEC6"></a>5.10.1.13. 店屋構造体アクセスサブルーチン</h4>
              </div>
            </div>
          </div>
          <p>
サブルーチン <code class="varname">$C3CEC6</code> では、店屋の ID を与えて店屋構造体のデータを取得する。
これは、それぞれの店を特徴付ける情報を保持するものだ。
アクセス汎用サブルーチン (<code class="varname">$C9050D</code>, <code class="varname">$C90717</code>) を利用しているのがポイントだ。
</p>
          <div class="itemizedlist">
            <ul class="itemizedlist" style="list-style-type: disc; ">
              <li class="listitem">
                <p>【事前条件】</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					<code class="code">A == 店屋構造体 ID</code>
				</p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>【事後条件】</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
					下の表の通り：
				</p>
                      <div class="table">
                        <a id="table.dq3.C3CEC6"></a>
                        <p class="title">
                          <strong>表 5.21 サブルーチン $C3CEC6 事後条件</strong>
                        </p>
                        <div class="table-contents">
                          <table id="table.dq3.C3CEC6" class="lighttable">
                            <thead>
                              <tr>
                                <th>Address</th>
                                <th>Value</th>
                              </tr>
                            </thead>
                            <tbody>
                              <tr>
                                <td>
                                  <code class="varname">$2BB2</code>
                                </td>
                                <td>店屋の台詞パターン ID; <code class="code">0,2,4,6,8</code> のどれか</td>
                              </tr>
                              <tr>
                                <td>
                                  <code class="varname">$2BB6</code>
                                </td>
                                <td>店屋の商品リスト数 </td>
                              </tr>
                              <tr>
                                <td>
                                  <code class="varname">$2BB8</code>
                                </td>
                                <td>店屋でまとめ買いができるかどうかを示す値; <code class="code">0,1</code> のどれか</td>
                              </tr>
                              <tr>
                                <td>
                                  <code class="varname">$2BBA</code>
                                </td>
                                <td>店屋の商品<code class="code">[0]</code> アイテム ID</td>
                              </tr>
                              <tr>
                                <td>
                                  <code class="varname">$2BBC</code>
                                </td>
                                <td>店屋の商品<code class="code">[1]</code> アイテム ID</td>
                              </tr>
                              <tr>
                                <td>
                                  <code class="varname">$2BBE</code>
                                </td>
                                <td>店屋の商品<code class="code">[2]</code> アイテム ID</td>
                              </tr>
                              <tr>
                                <td>
                                  <code class="varname">$2BC0</code>
                                </td>
                                <td>店屋の商品<code class="code">[3]</code> アイテム ID</td>
                              </tr>
                              <tr>
                                <td>
                                  <code class="varname">$2BC2</code>
                                </td>
                                <td>店屋の商品<code class="code">[4]</code> アイテム ID</td>
                              </tr>
                              <tr>
                                <td>
                                  <code class="varname">$2BC4</code>
                                </td>
                                <td>店屋の商品<code class="code">[5]</code> アイテム ID</td>
                              </tr>
                              <tr>
                                <td>
                                  <code class="varname">$2BC6</code>
                                </td>
                                <td>店屋の商品<code class="code">[6]</code> アイテム ID</td>
                              </tr>
                              <tr>
                                <td><code class="varname">$2BCA</code>（<code class="literal">3</code> バイト長）</td>
                                <td>店屋の商品<code class="code">[0]</code> 価格; <code class="varname">$2BBA</code> が非ゼロのときに限る</td>
                              </tr>
                              <tr>
                                <td><code class="varname">$2BCD</code>（<code class="literal">3</code> バイト長）</td>
                                <td>店屋の商品<code class="code">[1]</code> 価格; <code class="varname">$2BBC</code> が非ゼロのときに限る</td>
                              </tr>
                              <tr>
                                <td><code class="varname">$2BD0</code>（<code class="literal">3</code> バイト長）</td>
                                <td>店屋の商品<code class="code">[2]</code> 価格; <code class="varname">$2BBE</code> が非ゼロのときに限る</td>
                              </tr>
                              <tr>
                                <td><code class="varname">$2BD3</code>（<code class="literal">3</code> バイト長）</td>
                                <td>店屋の商品<code class="code">[3]</code> 価格; <code class="varname">$2BC0</code> が非ゼロのときに限る</td>
                              </tr>
                              <tr>
                                <td><code class="varname">$2BD6</code>（<code class="literal">3</code> バイト長）</td>
                                <td>店屋の商品<code class="code">[4]</code> 価格; <code class="varname">$2BC2</code> が非ゼロのときに限る</td>
                              </tr>
                              <tr>
                                <td><code class="varname">$2BD9</code>（<code class="literal">3</code> バイト長）</td>
                                <td>店屋の商品<code class="code">[5]</code> 価格; <code class="varname">$2BC4</code> が非ゼロのときに限る</td>
                              </tr>
                              <tr>
                                <td><code class="varname">$2BDC</code>（<code class="literal">3</code> バイト長）</td>
                                <td>店屋の商品<code class="code">[6]</code> 価格; <code class="varname">$2BC6</code> が非ゼロのときに限る</td>
                              </tr>
                            </tbody>
                          </table>
                        </div>
                      </div>
                      <br class="table-break" />
                    </li>
                    <li class="listitem">
                      <p>
					サブルーチン <code class="varname">$C3CF84</code> 呼び出しの事後条件
				</p>
                    </li>
                  </ul>
                </div>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    <div class="navigation"><hr /><table><tr><td class="online-navigation"><a href="dq3_sistersave.html" title="5.9. シスターセーブ解析"><img src="image/docbook/prev.png" alt="戻る" /></a></td><td class="online-navigation"><a href="dq3.html" title="第 5 章 SFC 版ドラクエ 3 (1996)"><img src="image/docbook/up.png" alt="上に戻る" /></a></td><td class="online-navigation"><a href="dq3_overcharge.html" title="5.11. ふっかけ店屋解析"><img src="image/docbook/next.png" alt="次へ" /></a></td><td>ドラクエ命</td><td class="online-navigation"><a href="index.html" title="ドラクエ命"><img src="image/docbook/home.png" alt="ホーム" /></a></td><td class="online-navigation"><a href="" title=""><img src="image/docbook/index.png" alt="索引" /></a></td></tr></table><b class="navlabel">Previous: </b><a accesskey="p" class="sectref" href="dq3_sistersave.html">5.9. シスターセーブ解析</a> <b class="navlabel">Up: </b><a accesskey="u" class="sectref" href="dq3.html">第 5 章 SFC 版ドラクエ 3 (1996)</a> <b class="navlabel">Next: </b><a accesskey="n" class="sectref" href="dq3_overcharge.html">5.11. ふっかけ店屋解析</a></div>
  </body>
</html>
