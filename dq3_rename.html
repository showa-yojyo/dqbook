<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>5.19. 命名神</title>
    <link rel="stylesheet" type="text/css" href="dqbook.css" />
    <meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" />
    <link rel="home" href="index.html" title="ドラクエ命" />
    <link rel="up" href="dq3.html" title="第 5 章 SFC 版ドラクエ 3 (1996)" />
    <link rel="prev" href="dq3_dharma.html" title="5.18. 転職" />
    <link rel="next" href="dq3_matchmake.html" title="5.20. 格闘場" />
  </head>
  <body>
    <div class="navigation"><table><tr><td class="online-navigation"><a href="dq3_dharma.html" title="5.18. 転職"><img src="image/docbook/prev.png" alt="戻る" /></a></td><td class="online-navigation"><a href="dq3.html" title="第 5 章 SFC 版ドラクエ 3 (1996)"><img src="image/docbook/up.png" alt="上に戻る" /></a></td><td class="online-navigation"><a href="dq3_matchmake.html" title="5.20. 格闘場"><img src="image/docbook/next.png" alt="次へ" /></a></td><td>ドラクエ命</td><td class="online-navigation"><a href="index.html" title="ドラクエ命"><img src="image/docbook/home.png" alt="ホーム" /></a></td><td class="online-navigation"><a href="" title=""><img src="image/docbook/index.png" alt="索引" /></a></td></tr></table><b class="navlabel">Previous: </b><a accesskey="p" class="sectref" href="dq3_dharma.html">5.18. 転職</a> <b class="navlabel">Up: </b><a accesskey="u" class="sectref" href="dq3.html">第 5 章 SFC 版ドラクエ 3 (1996)</a> <b class="navlabel">Next: </b><a accesskey="n" class="sectref" href="dq3_matchmake.html">5.20. 格闘場</a><hr /></div>
    <div class="section">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title" style="clear: both"><a id="dq3.rename"></a>5.19. 命名神</h2>
          </div>
        </div>
      </div>
      <div class="toc">
        <dl class="toc">
          <dt>
            <span class="section">
              <a href="dq3_rename.html#dq3.rename.structure">5.19.1. 構造に関する構成要素</a>
            </span>
          </dt>
          <dd>
            <dl>
              <dt>
                <span class="section">
                  <a href="dq3_rename.html#dq3.rename.structure.C30AF5">5.19.1.1. 配列 <code class="varname">$C30AF5</code>: ふざけた名前</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="dq3_rename.html#dq3.rename.structure.C31368">5.19.1.2. 配列 <code class="varname">$C31368</code>: 予約名</a>
                </span>
              </dt>
            </dl>
          </dd>
          <dt>
            <span class="section">
              <a href="dq3_rename.html#dq3.rename.behavior">5.19.2. 振る舞いに関する構成要素</a>
            </span>
          </dt>
          <dd>
            <dl>
              <dt>
                <span class="section">
                  <a href="dq3_rename.html#dq3.rename.behavior.C3E8D3">5.19.2.1. サブルーチン <code class="varname">$C3E8D3</code>: 命名神メイン</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="dq3_rename.html#dq3.rename.behavior.C3EB2B">5.19.2.2. サブルーチン <code class="varname">$C3EB2B</code>: 名前がふざけた名前かどうか</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="dq3_rename.html#dq3.rename.behavior.C3EB3F">5.19.2.3. サブルーチン <code class="varname">$C3EB3F</code>: 入力が予約名かどうか</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="dq3_rename.html#dq3.rename.behavior.C3EB53">5.19.2.4. サブルーチン <code class="varname">$C3EB53</code>: 名前テスト共通</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="dq3_rename.html#dq3.rename.behavior.C3EBAB">5.19.2.5. サブルーチン <code class="varname">C3EBAB</code>: 名前が同一文字の連続形かどうか</a>
                </span>
              </dt>
              <dt>
                <span class="section">
                  <a href="dq3_rename.html#dq3.rename.behavior.C3EBCD">5.19.2.6. サブルーチン <code class="varname">$C3EBCD</code>: 現在の名前が怒りに触れているかどうか</a>
                </span>
              </dt>
            </dl>
          </dd>
        </dl>
      </div>
      <p>
本節では命名神について述べる。
</p>
      <div class="section">
        <div class="titlepage">
          <div>
            <div>
              <h3 class="title"><a id="dq3.rename.structure"></a>5.19.1. 構造に関する構成要素</h3>
            </div>
          </div>
        </div>
        <p>
命名神が参照するデータおよびそのの構造について述べる。
</p>
        <div class="section">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title"><a id="dq3.rename.structure.C30AF5"></a>5.19.1.1. 配列 <code class="varname">$C30AF5</code>: ふざけた名前</h4>
              </div>
            </div>
          </div>
          <p>
アドレス <code class="varname">$C30AF5</code> に命名神の怒りに触れる名前を表す文字列 ID が配列している。
文字列データ自体は基本的に平仮名をベースとした形式で配列している。
濁点・半濁点が関係しない文字については、対応する平仮名と片仮名同士のコードポイント差が定数となることからこういう形式になっている。
濁点・半濁点が関係する文字については、平仮名と片仮名それぞれをリストしなければならない。
</p>
          <div class="table">
            <a id="table.dq3.C30AF5"></a>
            <p class="title">
              <strong>表 5.39 配列 $C30AF5</strong>
            </p>
            <div class="table-contents">
              <table id="table.dq3.C30AF5" class="lighttable">
                <thead>
                  <tr>
                    <th>文字列 ID</th>
                    <th>文字列</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td align="center">
                      <code class="literal">#$02F6</code>
                    </td>
                    <td>ちんこ</td>
                  </tr>
                  <tr>
                    <td align="center">
                      <code class="literal">#$02F7</code>
                    </td>
                    <td>きんたま</td>
                  </tr>
                  <tr>
                    <td align="center">
                      <code class="literal">#$02F8</code>
                    </td>
                    <td>ちんちん</td>
                  </tr>
                  <tr>
                    <td align="center">
                      <code class="literal">#$02F9</code>
                    </td>
                    <td>あほ</td>
                  </tr>
                  <tr>
                    <td align="center">
                      <code class="literal">#$02FA</code>
                    </td>
                    <td>ちんぽこ</td>
                  </tr>
                  <tr>
                    <td align="center">
                      <code class="literal">#$02FB</code>
                    </td>
                    <td>ちんポこ</td>
                  </tr>
                  <tr>
                    <td align="center">
                      <code class="literal">#$02FC</code>
                    </td>
                    <td>へんたい</td>
                  </tr>
                  <tr>
                    <td align="center">
                      <code class="literal">#$02FD</code>
                    </td>
                    <td>ちんぼ</td>
                  </tr>
                  <tr>
                    <td align="center">
                      <code class="literal">#$02FE</code>
                    </td>
                    <td>ちんボ</td>
                  </tr>
                  <tr>
                    <td align="center">
                      <code class="literal">#$02FF</code>
                    </td>
                    <td>ちかん</td>
                  </tr>
                  <tr>
                    <td align="center">
                      <code class="literal">#$0300</code>
                    </td>
                    <td>おめこ</td>
                  </tr>
                  <tr>
                    <td align="center">
                      <code class="literal">#$0301</code>
                    </td>
                    <td>まんこ</td>
                  </tr>
                  <tr>
                    <td align="center">
                      <code class="literal">#$0302</code>
                    </td>
                    <td>おまんこ</td>
                  </tr>
                  <tr>
                    <td align="center">
                      <code class="literal">#$0303</code>
                    </td>
                    <td>あそこ</td>
                  </tr>
                  <tr>
                    <td align="center">
                      <code class="literal">#$0304</code>
                    </td>
                    <td>うんこ</td>
                  </tr>
                  <tr>
                    <td align="center">
                      <code class="literal">#$0305</code>
                    </td>
                    <td>でべそ</td>
                  </tr>
                  <tr>
                    <td align="center">
                      <code class="literal">#$0306</code>
                    </td>
                    <td>デべそ</td>
                  </tr>
                  <tr>
                    <td align="center">
                      <code class="literal">#$0307</code>
                    </td>
                    <td>うんち</td>
                  </tr>
                  <tr>
                    <td align="center">
                      <code class="literal">#$0308</code>
                    </td>
                    <td>はなたれ</td>
                  </tr>
                  <tr>
                    <td align="center">
                      <code class="literal">#$0309</code>
                    </td>
                    <td>おしっこ</td>
                  </tr>
                  <tr>
                    <td align="center">
                      <code class="literal">#$030A</code>
                    </td>
                    <td>せっくす</td>
                  </tr>
                  <tr>
                    <td align="center">
                      <code class="literal">#$030B</code>
                    </td>
                    <td>ばか</td>
                  </tr>
                  <tr>
                    <td align="center">
                      <code class="literal">#$030C</code>
                    </td>
                    <td>バか</td>
                  </tr>
                  <tr>
                    <td align="center">
                      <code class="literal">#$030D</code>
                    </td>
                    <td>おしり</td>
                  </tr>
                  <tr>
                    <td align="center">
                      <code class="literal">#$030E</code>
                    </td>
                    <td>まぬけ</td>
                  </tr>
                  <tr>
                    <td align="center">
                      <code class="literal">#$030F</code>
                    </td>
                    <td>あなる</td>
                  </tr>
                  <tr>
                    <td align="center">
                      <code class="literal">#$0310</code>
                    </td>
                    <td>きちがい</td>
                  </tr>
                  <tr>
                    <td align="center">
                      <code class="literal">#$0311</code>
                    </td>
                    <td>すけべ</td>
                  </tr>
                  <tr>
                    <td align="center">
                      <code class="literal">#$0312</code>
                    </td>
                    <td>きちガい</td>
                  </tr>
                  <tr>
                    <td align="center">
                      <code class="literal">#$0313</code>
                    </td>
                    <td>すけべ</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          <br class="table-break" />
        </div>
        <div class="section">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title"><a id="dq3.rename.structure.C31368"></a>5.19.1.2. 配列 <code class="varname">$C31368</code>: 予約名</h4>
              </div>
            </div>
          </div>
          <p>
アドレス <code class="varname">$C31368</code> には予約名を表す文字列 ID が配列している。
物語の登場人物で厳選した者で編成されたものと考えられる。
</p>
          <div class="table">
            <a id="table.dq3.C31368"></a>
            <p class="title">
              <strong>表 5.40 配列 $C31368</strong>
            </p>
            <div class="table-contents">
              <table id="table.dq3.C31368" class="lighttable">
                <thead>
                  <tr>
                    <th>文字列 ID</th>
                    <th>文字列</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td align="center">
                      <code class="literal">#$0324</code>
                    </td>
                    <td>おるてが</td>
                  </tr>
                  <tr>
                    <td align="center">
                      <code class="literal">#$0325</code>
                    </td>
                    <td>かんだた</td>
                  </tr>
                  <tr>
                    <td align="center">
                      <code class="literal">#$0326</code>
                    </td>
                    <td>がらい</td>
                  </tr>
                  <tr>
                    <td align="center">
                      <code class="literal">#$0327</code>
                    </td>
                    <td>おるてガ</td>
                  </tr>
                  <tr>
                    <td align="center">
                      <code class="literal">#$0328</code>
                    </td>
                    <td>かんダた</td>
                  </tr>
                  <tr>
                    <td align="center">
                      <code class="literal">#$0329</code>
                    </td>
                    <td>ガらい</td>
                  </tr>
                  <tr>
                    <td align="center">
                      <code class="literal">#$032A</code>
                    </td>
                    <td>えりっく</td>
                  </tr>
                  <tr>
                    <td align="center">
                      <code class="literal">#$032B</code>
                    </td>
                    <td>おりびあ</td>
                  </tr>
                  <tr>
                    <td align="center">
                      <code class="literal">#$032C</code>
                    </td>
                    <td>ばらもす</td>
                  </tr>
                  <tr>
                    <td align="center">
                      <code class="literal">#$032D</code>
                    </td>
                    <td>ぞーま</td>
                  </tr>
                  <tr>
                    <td align="center">
                      <code class="literal">#$032E</code>
                    </td>
                    <td>おりビあ</td>
                  </tr>
                  <tr>
                    <td align="center">
                      <code class="literal">#$032F</code>
                    </td>
                    <td>バらもす</td>
                  </tr>
                  <tr>
                    <td align="center">
                      <code class="literal">#$0330</code>
                    </td>
                    <td>ゾーま</td>
                  </tr>
                  <tr>
                    <td align="center">
                      <code class="literal">#$0331</code>
                    </td>
                    <td>ひみこ</td>
                  </tr>
                  <tr>
                    <td align="center">
                      <code class="literal">#$0332</code>
                    </td>
                    <td>るびす</td>
                  </tr>
                  <tr>
                    <td align="center">
                      <code class="literal">#$0333</code>
                    </td>
                    <td>のるど</td>
                  </tr>
                  <tr>
                    <td align="center">
                      <code class="literal">#$0334</code>
                    </td>
                    <td>ばこた</td>
                  </tr>
                  <tr>
                    <td align="center">
                      <code class="literal">#$0335</code>
                    </td>
                    <td>ぜにす</td>
                  </tr>
                  <tr>
                    <td align="center">
                      <code class="literal">#$0336</code>
                    </td>
                    <td>るビす</td>
                  </tr>
                  <tr>
                    <td align="center">
                      <code class="literal">#$0337</code>
                    </td>
                    <td>のるド</td>
                  </tr>
                  <tr>
                    <td align="center">
                      <code class="literal">#$0338</code>
                    </td>
                    <td>バこた</td>
                  </tr>
                  <tr>
                    <td align="center">
                      <code class="literal">#$0339</code>
                    </td>
                    <td>ゼにす</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          <br class="table-break" />
        </div>
      </div>
      <div class="section">
        <div class="titlepage">
          <div>
            <div>
              <h3 class="title"><a id="dq3.rename.behavior"></a>5.19.2. 振る舞いに関する構成要素</h3>
            </div>
          </div>
        </div>
        <p>
命名神に仕える神官の振る舞いについて述べる。
</p>
        <div class="section">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title"><a id="dq3.rename.behavior.C3E8D3"></a>5.19.2.1. サブルーチン <code class="varname">$C3E8D3</code>: 命名神メイン</h4>
              </div>
            </div>
          </div>
          <p>
ダーマの神殿の西側にいる婆サンに「はなす」とサブルーチン <code class="varname">$C3E8D3</code> が実行される。
以下、要点を列挙する。
</p>
          <div class="itemizedlist">
            <ul class="itemizedlist" style="list-style-type: disc; ">
              <li class="listitem">
                <p>
      対象はパーティー内の任意のキャラクターまたはパーティー共有のふくろのうちから選べる。
    </p>
              </li>
              <li class="listitem">
                <p>
      対象の現在の名前が怒りに触れているときは、まず呪いの効果音を再生する。
    </p>
              </li>
              <li class="listitem">
                <p>
      怒りを解くのに 5,000 ゴールドが必要となる。
      この支払い判定はサブルーチン <code class="varname">$C45B66</code> で行う。
    </p>
              </li>
              <li class="listitem">
                <p>
      入力内容によって神官の反応が違ってくる。このうち最後の二つについては命名神の怒りに触れる。
    </p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: circle; ">
                    <li class="listitem">
                      <p>
          入力文字列が現在の名前と全く同じ場合はキャンセル時と同じ扱いとする。
        </p>
                    </li>
                    <li class="listitem">
                      <p>
          入力文字列が文字列「ロト」とマッチする場合。
          これは登録所の処理で行う判定処理と同じものを用いる。
        </p>
                    </li>
                    <li class="listitem">
                      <p>
          入力文字列が予約名とマッチする場合。
          <a class="xref" href="dq3_rename.html#dq3.rename.behavior.C3EB3F" title="5.19.2.3. サブルーチン $C3EB3F: 入力が予約名かどうか">5.19.2.3</a> を参照。
          これは登録所の処理で行う判定処理と同じだ。
        </p>
                    </li>
                    <li class="listitem">
                      <p>
          入力文字列が既存の仲間キャラクターの名前と全く同じ場合。
          これは登録所の処理で行う判定処理と同じものを用いる。
        </p>
                    </li>
                    <li class="listitem">
                      <p>
          入力文字列がふざけた名前となる場合。
          <a class="xref" href="dq3_rename.html#dq3.rename.behavior.C3EB2B" title="5.19.2.2. サブルーチン $C3EB2B: 名前がふざけた名前かどうか">5.19.2.2</a> を参照。
        </p>
                    </li>
                    <li class="listitem">
                      <p>
          入力文字列が同一文字の連続形となる場合。
          <a class="xref" href="dq3_rename.html#dq3.rename.behavior.C3EBAB" title="5.19.2.5. サブルーチン C3EBAB: 名前が同一文字の連続形かどうか">5.19.2.5</a> を参照。
        </p>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="listitem">
                <p>
      命名神の怒りに触れると、画面がフラッシュして呪いの効果音を再生する。
    </p>
              </li>
            </ul>
          </div>
        </div>
        <div class="section">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title"><a id="dq3.rename.behavior.C3EB2B"></a>5.19.2.2. サブルーチン <code class="varname">$C3EB2B</code>: 名前がふざけた名前かどうか</h4>
              </div>
            </div>
          </div>
          <p>
プレイヤーが入力した名前がふざけたものであるかどうかをテストする。
これは後述するサブルーチン <code class="varname">$C3EB53</code> にブラックリストを指定する形式で実行される。
<a class="xref" href="dq3_rename.html#dq3.rename.structure.C30AF5" title="5.19.1.1. 配列 $C30AF5: ふざけた名前">5.19.1.1</a> および
<a class="xref" href="dq3_rename.html#dq3.rename.behavior.C3EB53" title="5.19.2.4. サブルーチン $C3EB53: 名前テスト共通">5.19.2.4</a> を参照。
</p>
        </div>
        <div class="section">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title"><a id="dq3.rename.behavior.C3EB3F"></a>5.19.2.3. サブルーチン <code class="varname">$C3EB3F</code>: 入力が予約名かどうか</h4>
              </div>
            </div>
          </div>
          <p>
プレイヤーが入力した名前が、ゲームにより予約された名前であるかどうかをテストする。
これは後述するサブルーチン <code class="varname">$C3EB53</code> に予約名リストを指定する形式で実行される。
<a class="xref" href="dq3_rename.html#dq3.rename.structure.C31368" title="5.19.1.2. 配列 $C31368: 予約名">5.19.1.2</a> および
<a class="xref" href="dq3_rename.html#dq3.rename.behavior.C3EB53" title="5.19.2.4. サブルーチン $C3EB53: 名前テスト共通">5.19.2.4</a> を参照。
</p>
        </div>
        <div class="section">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title"><a id="dq3.rename.behavior.C3EB53"></a>5.19.2.4. サブルーチン <code class="varname">$C3EB53</code>: 名前テスト共通</h4>
              </div>
            </div>
          </div>
          <p>
サブルーチン <code class="varname">$C3EB53</code> は呼び出し元が指定する文字列型配列から、文字列を検索する。
</p>
          <p>
処理としては二重ループによる線形探索だ。
対応する平仮名と片仮名同士を同じ文字として比較することにより、名前同士が「同じ」かどうかを判定する。
濁点・半濁点の付かない文字は、文字コードの差が一定であることを利用しての比較となるが、
付く文字はそうとも言えないので、リストの方に平仮名と片仮名を重複して定義しておく必要がある。
具体的には掲載データを参照して欲しい。
</p>
        </div>
        <div class="section">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title"><a id="dq3.rename.behavior.C3EBAB"></a>5.19.2.5. サブルーチン <code class="varname">C3EBAB</code>: 名前が同一文字の連続形かどうか</h4>
              </div>
            </div>
          </div>
          <p>
サブルーチン <code class="varname">C3EBAB</code> は名前が任意の一文字 4 個が連続する文字列であるかどうかをテストする。
処理内容は十数個の命令からなる単純な配列検索に過ぎない。
</p>
        </div>
        <div class="section">
          <div class="titlepage">
            <div>
              <div>
                <h4 class="title"><a id="dq3.rename.behavior.C3EBCD"></a>5.19.2.6. サブルーチン <code class="varname">$C3EBCD</code>: 現在の名前が怒りに触れているかどうか</h4>
              </div>
            </div>
          </div>
          <p>
サブルーチン <code class="varname">$C3EBCD</code> は、指定したキャラクターの現在の名前が、
命名神の怒りにふれているものかどうかをテストする。
以下、要点を列挙する。
</p>
          <div class="itemizedlist">
            <ul class="itemizedlist" style="list-style-type: disc; ">
              <li class="listitem">
                <p>
      現在の対象者の名前がふざけた名前かどうかを判定する。
      <a class="xref" href="dq3_rename.html#dq3.rename.behavior.C3EB3F" title="5.19.2.3. サブルーチン $C3EB3F: 入力が予約名かどうか">5.19.2.3</a> 参照。
    </p>
              </li>
              <li class="listitem">
                <p>
      現在の対象者の名前が同一文字の連続形かどうかを判定する。
      <a class="xref" href="dq3_rename.html#dq3.rename.behavior.C3EBAB" title="5.19.2.5. サブルーチン C3EBAB: 名前が同一文字の連続形かどうか">5.19.2.5</a> 参照。
    </p>
              </li>
              <li class="listitem">
                <p>
      どちらかに判定された名前が怒りに触れているものとする。
    </p>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    <div class="navigation"><hr /><table><tr><td class="online-navigation"><a href="dq3_dharma.html" title="5.18. 転職"><img src="image/docbook/prev.png" alt="戻る" /></a></td><td class="online-navigation"><a href="dq3.html" title="第 5 章 SFC 版ドラクエ 3 (1996)"><img src="image/docbook/up.png" alt="上に戻る" /></a></td><td class="online-navigation"><a href="dq3_matchmake.html" title="5.20. 格闘場"><img src="image/docbook/next.png" alt="次へ" /></a></td><td>ドラクエ命</td><td class="online-navigation"><a href="index.html" title="ドラクエ命"><img src="image/docbook/home.png" alt="ホーム" /></a></td><td class="online-navigation"><a href="" title=""><img src="image/docbook/index.png" alt="索引" /></a></td></tr></table><b class="navlabel">Previous: </b><a accesskey="p" class="sectref" href="dq3_dharma.html">5.18. 転職</a> <b class="navlabel">Up: </b><a accesskey="u" class="sectref" href="dq3.html">第 5 章 SFC 版ドラクエ 3 (1996)</a> <b class="navlabel">Next: </b><a accesskey="n" class="sectref" href="dq3_matchmake.html">5.20. 格闘場</a></div>
  </body>
</html>
